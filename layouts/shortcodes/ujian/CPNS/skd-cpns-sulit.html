
    <!-- SELURUH KONTEN HTML ANDA DARI SINI -->
    <div id="login-container">
        <div class="login-box">
            <h2>Login Peserta Ujian</h2>
            <div class="input-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Masukkan username Anda">
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Masukkan password">
            </div>
            <button id="login-btn">Masuk</button>
            <p id="login-error">Password salah. Coba lagi.</p>
            <a href="/ujian/cara-ikut-tryout-online-gratis" style="text-decoration: none;">
                <button id="cara-btn" type="button">Cara Ikut Try Out</button>
            </a>
        </div>
    </div>

    <header class="header" style="display: none;">
        <h2>Simulasi Ujian</h2>
        <div class="user-info">
            <span id="header-info"></span>
            <button id="logout-btn">Logout</button>
        </div>
    </header>

    <div class="quiz-container" style="display: none;">
        <main class="question-panel">
            <div class="question-header">
                <span id="subtest-title">Subtes</span> | Soal No. <span id="question-number">1</span>
            </div>
            <div class="question-body">
                <p id="question-text">Memuat soal...</p>
                <ul id="options" class="options-list"></ul>
            </div>
            <div class="quiz-actions">
                <button id="prev-btn" class="action-button">Sebelumnya</button>
                <button id="doubtful-btn" class="action-button">Ragu-ragu</button>
                <button id="next-btn" class="action-button">Selanjutnya</button>
            </div>
        </main>
        <aside class="navigation-panel">
            <div class="timer-box">
                Sisa Waktu
                <div id="timer">30:00</div>
            </div>
            <div id="grid-container" class="question-grid-container"></div>
            <div class="quiz-actions" style="justify-content: center;">
                <button id="finish-btn" class="action-button">Selesaikan Ujian</button>
            </div>
        </aside>
    </div>

    <div id="result-page" class="result-container" style="display: none;">
        <div class="result-card overall-summary">
            <div id="status-lulus" class="status"></div>
            <h2>Hasil Akhir Ujian</h2>
            <div id="final-score" class="score">0</div>
            <div id="score-details" class="score-details"></div>
            <div id="submission-status"></div>
        </div>
        <div class="result-card">
            <h3>Tinjauan Jawaban</h3>
            <div id="review-section"></div>
        </div>
        <div style="text-align: center;">
           <button id="restart-btn" class="action-button">Ulangi Ujian</button>
        </div>
    </div>
    
    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Selesaikan Ujian?</h2>
            <p>Apakah Anda yakin ingin menyelesaikan dan mengakhiri sesi ujian ini?</p>
            <div class="modal-actions">
                <button id="confirm-no" class="action-button">Batal</button>
                <button id="confirm-yes" class="action-button">Ya, Selesaikan</button>
            </div>
        </div>
    </div>
    <!-- HINGGA AKHIR KONTEN HTML ANDA -->

<script>
// ===================================================================================
// --- KONFIGURASI UJIAN (HANYA UBAH BAGIAN INI UNTUK UJIAN BARU) ---
// ===================================================================================
const EXAM_CONFIG = {
    // 1. Ganti nama kategori ini sesuai nama sheet di Google Sheets (cth: "TWK", "TKP")
    kategori: "SKDCPNS",
    
    // 2. Ganti URL ini dengan URL Web App dari Google Script Anda yang sudah di-deploy ulang.
    scriptURL: 'https://script.google.com/macros/s/AKfycbxNJ9pOsCPSPAPRQKfoq43AwmVMSIScq6AIa33Q0dxnMI-jb1xuxi1aK3bUBFDstinDiQ/exec',
    
    // 3. Ganti link peringkat ini ke halaman peringkat yang sesuai.
    linkPeringkat: "/ujian/ranking-peserta-tryout/",
    
    // 4. Sesuaikan pengaturan ujian jika perlu.
    durasiMenit: 150,
    passingGrade: 65,
    password: "ujian",
    
    // 5. Ganti seluruh isi bank soal di bawah ini dengan soal yang sesuai.
    bankSoal: [
            // --- TWK (Tes Wawasan Kebangsaan) - 30 Soal ---
    // Nasionalisme (5 soal)
    { subtest: 'TWK', question: 'Proklamasi Kemerdekaan Indonesia pada tanggal 17 Agustus 1945 memiliki makna penting bagi bangsa Indonesia, yaitu sebagai...', options: ['A. Akhir dari perjuangan fisik bangsa Indonesia', 'B. Puncak perjuangan pergerakan kemerdekaan', 'C. Pemberian kemerdekaan oleh Jepang', 'D. Peristiwa lahirnya Pancasila sebagai dasar negara'], answer: 'B. Puncak perjuangan pergerakan kemerdekaan', explanation: 'Proklamasi Kemerdekaan adalah puncak dari perjuangan panjang bangsa Indonesia melawan penjajahan, bukan akhir perjuangan fisik, atau pemberian dari pihak asing.' },
    { subtest: 'TWK', question: 'Sikap nasionalisme yang benar dalam menghadapi era globalisasi adalah...', options: ['A. Menutup diri dari pengaruh budaya asing', 'B. Menerima semua budaya asing tanpa seleksi', 'C. Mengembangkan potensi diri agar mampu bersaing dan tetap mencintai produk dalam negeri', 'D. Menolak segala bentuk kerja sama internasional'], answer: 'C. Mengembangkan potensi diri agar mampu bersaing dan tetap mencintai produk dalam negeri', explanation: 'Nasionalisme di era globalisasi berarti mampu bersaing secara global sambil tetap mempertahankan identitas dan mencintai produk serta nilai-nilai bangsa sendiri, bukan menutup diri atau menerima tanpa filter.' },
    { subtest: 'TWK', question: 'Siapa tokoh yang pertama kali mencetuskan gagasan Pancasila sebagai dasar negara pada sidang BPUPKI?', options: ['A. Mohammad Hatta', 'B. Soepomo', 'C. Ir. Soekarno', 'D. Mohammad Yamin'], answer: 'C. Ir. Soekarno', explanation: 'Ir. Soekarno adalah tokoh yang pertama kali mencetuskan istilah Pancasila pada pidatonya tanggal 1 Juni 1945 di sidang BPUPKI.' },
    { subtest: 'TWK', question: 'Berdasarkan sejarahnya, sumpah pemuda merupakan hasil kongres pemuda ke...', options: ['A. I', 'B. II', 'C. III', 'D. IV'], answer: 'B. II', explanation: 'Sumpah Pemuda dicetuskan pada Kongres Pemuda II yang dilaksanakan pada tanggal 27-28 Oktober 1928 di Jakarta.' },
    { subtest: 'TWK', question: 'Salah satu dampak negatif dari lunturnya semangat nasionalisme adalah...', options: ['A. Meningkatnya rasa persatuan dan kesatuan', 'B. Munculnya disintegrasi bangsa dan konflik sosial', 'C. Peningkatan daya saing ekonomi nasional', 'D. Memperkuat posisi negara di mata internasional'], answer: 'B. Munculnya disintegrasi bangsa dan konflik sosial', explanation: 'Lunturnya semangat nasionalisme dapat menyebabkan hilangnya rasa persatuan, sehingga mudah timbul perpecahan dan konflik di tengah masyarakat, bahkan disintegrasi bangsa.' },

    // Bela Negara (5 soal)
    { subtest: 'TWK', question: 'Partisipasi aktif warga negara dalam upaya bela negara dapat diwujudkan melalui berbagai bentuk, salah satunya adalah...', options: ['A. Menjadi anggota partai politik', 'B. Membayar pajak tepat waktu', 'C. Mengikuti wajib militer bagi yang memenuhi syarat', 'D. Menjadi aktivis lingkungan hidup'], answer: 'C. Mengikuti wajib militer bagi yang memenuhi syarat', explanation: 'Bela negara tidak hanya berbentuk fisik, tetapi juga non-fisik. Mengikuti wajib militer adalah salah satu bentuk nyata partisipasi dalam pertahanan negara, di samping membayar pajak dan berkontribusi positif di berbagai bidang.' },
    { subtest: 'TWK', question: 'Konsep bela negara menurut UUD 1945 pasal 27 ayat (3) menyatakan bahwa setiap warga negara berhak dan wajib...', options: ['A. Ikut serta dalam pembangunan nasional', 'B. Mempertahankan kemerdekaan negara', 'C. Ikut serta dalam upaya pembelaan negara', 'D. Mematuhi segala peraturan perundang-undangan'], answer: 'C. Ikut serta dalam upaya pembelaan negara', explanation: 'Pasal 27 ayat (3) UUD 1945 secara spesifik menyatakan bahwa "Setiap warga negara berhak dan wajib ikut serta dalam upaya pembelaan negara.".' },
    { subtest: 'TWK', question: 'Ancaman non-militer terhadap kedaulatan negara bisa berasal dari ideologi, politik, ekonomi, sosial budaya, teknologi, dan keselamatan umum. Salah satu contoh ancaman non-militer di bidang sosial budaya adalah...', options: ['A. Agresi militer dari negara asing', 'B. Krisis ekonomi yang berkepanjangan', 'C. Masuknya budaya asing yang tidak sesuai nilai luhur bangsa', 'D. Terorisme yang mengancam keamanan negara'], answer: 'C. Masuknya budaya asing yang tidak sesuai nilai luhur bangsa', explanation: 'Ancaman non-militer di bidang sosial budaya seringkali terkait dengan masuknya nilai-nilai atau budaya dari luar yang dapat mengikis nilai-nilai luhur bangsa jika tidak disaring dengan baik.' },
    { subtest: 'TWK', question: 'Meningkatnya kesadaran masyarakat untuk membuang sampah pada tempatnya merupakan bentuk bela negara di bidang...', options: ['A. Lingkungan hidup', 'B. Sosial kemasyarakatan', 'C. Ketertiban umum', 'D. Kesehatan masyarakat'], answer: 'A. Lingkungan hidup', explanation: 'Menjaga kebersihan dan kelestarian lingkungan adalah bagian dari upaya bela negara non-fisik untuk keberlangsungan hidup bangsa.' },
    { subtest: 'TWK', question: 'Dalam konteks globalisasi, upaya bela negara dapat dilakukan dengan...', options: ['A. Menutup diri dari pergaulan dunia', 'B. Mengikuti semua tren global tanpa filter', 'C. Memperkuat identitas bangsa dan mempromosikannya di kancah internasional', 'D. Mengandalkan bantuan dari negara lain untuk pertahanan'], answer: 'C. Memperkuat identitas bangsa dan mempromosikannya di kancah internasional', explanation: 'Bela negara dalam era globalisasi berarti mampu bersaing dan berinteraksi dengan dunia luar sambil tetap memegang teguh dan mempromosikan nilai-nilai serta identitas bangsa.' },

    // Integritas (5 soal)
    { subtest: 'TWK', question: 'Seorang ASN menemukan dompet berisi uang dan identitas milik seseorang. Sikap berintegritas yang sebaiknya dilakukan adalah...', options: ['A. Mengambil uangnya dan membuang dompetnya', 'B. Mengembalikan dompet dan isinya kepada pemiliknya tanpa mengharapkan imbalan', 'C. Menyerahkan dompet tersebut kepada rekan kerja', 'D. Menyimpan dompet tersebut untuk sementara waktu'], answer: 'B. Mengembalikan dompet dan isinya kepada pemiliknya tanpa mengharapkan imbalan', explanation: 'Integritas mencakup kejujuran dan bertindak sesuai dengan nilai-nilai moral. Mengembalikan barang temuan kepada pemiliknya adalah tindakan yang jujur dan berintegritas.' },
    { subtest: 'TWK', question: 'Jika Anda mengetahui ada rekan kerja yang melakukan praktik pungutan liar (pungli), tindakan yang paling tepat sesuai nilai integritas adalah...', options: ['A. Menegur secara personal dan merahasiakannya', 'B. Melaporkan kepada atasan atau pihak berwenang sesuai prosedur', 'C. Ikut serta agar tidak dianggap tidak solider', 'D. Mengabaikannya karena bukan urusan Anda'], answer: 'B. Melaporkan kepada atasan atau pihak berwenang sesuai prosedur', explanation: 'Integritas menuntut keberanian untuk melaporkan pelanggaran, terutama jika itu merugikan publik atau mencoreng nama baik instansi. Melapor sesuai prosedur adalah langkah yang benar.' },
    { subtest: 'TWK', question: 'Sebagai seorang ASN, Anda diminta oleh atasan untuk memalsukan data demi keuntungan proyek. Sikap Anda seharusnya...', options: ['A. Mengikuti perintah atasan agar tidak kehilangan pekerjaan', 'B. Melaporkan hal tersebut kepada pihak yang berwenang', 'C. Memalsukan data tetapi dengan sedikit perubahan', 'D. Menolak secara halus tanpa menimbulkan konflik'], answer: 'B. Melaporkan hal tersebut kepada pihak yang berwenang', explanation: 'Memalsukan data adalah tindakan tidak berintegritas dan melanggar hukum. Melaporkan kepada pihak berwenang adalah tindakan yang paling benar untuk menjaga integritas dan akuntabilitas.' },
    { subtest: 'TWK', question: 'Ketika Anda tidak sengaja melakukan kesalahan dalam pekerjaan yang berakibat fatal, tindakan yang menunjukkan integritas tinggi adalah...', options: ['A. Berusaha menutupi kesalahan tersebut', 'B. Menyalahkan rekan kerja lain', 'C. Mengakui kesalahan dan bertanggung jawab atas konsekuensinya', 'D. Berpura-pura tidak tahu'], answer: 'C. Mengakui kesalahan dan bertanggung jawab atas konsekuensinya', explanation: 'Integritas berarti berani mengakui kesalahan, belajar darinya, dan bertanggung jawab. Ini adalah fondasi kepercayaan dan profesionalisme.' },
    { subtest: 'TWK', question: 'Pentingnya integritas bagi seorang ASN adalah untuk...', options: ['A. Meningkatkan pendapatan pribadi', 'B. Menciptakan kepercayaan publik dan pemerintahan yang bersih', 'C. Mendapatkan promosi jabatan dengan cepat', 'D. Memudahkan dalam bekerja sama dengan pihak swasta'], answer: 'B. Menciptakan kepercayaan publik dan pemerintahan yang bersih', explanation: 'Integritas ASN sangat krusial untuk membangun kepercayaan masyarakat terhadap pemerintah dan memastikan tata kelola pemerintahan yang bersih dan akuntabel.' },

    // Pilar Negara (5 soal)
    { subtest: 'TWK', question: 'Pancasila sebagai dasar negara memiliki makna sebagai...', options: ['A. Pedoman hidup berbangsa dan bernegara', 'B. Ideologi yang dapat diubah sewaktu-waktu', 'C. Alat untuk mencapai kekuasaan', 'D. Sumber hukum tertinggi di atas UUD 1945'], answer: 'A. Pedoman hidup berbangsa dan bernegara', explanation: 'Pancasila adalah pandangan hidup bangsa, dasar negara, dan ideologi yang menjadi pedoman dalam segala aspek kehidupan berbangsa dan bernegara.' },
    { subtest: 'TWK', question: 'Sila kedua Pancasila, "Kemanusiaan yang Adil dan Beradab", mengandung makna...', options: ['A. Persatuan dan kesatuan bangsa', 'B. Musyawarah untuk mufakat', 'C. Menjunjung tinggi hak asasi manusia dan keadilan', 'D. Keseimbangan antara hak dan kewajiban'], answer: 'C. Menjunjung tinggi hak asasi manusia dan keadilan', explanation: 'Sila kedua Pancasila menekankan pengakuan dan penghormatan terhadap martabat manusia, keadilan, serta kesetaraan hak dan kewajiban setiap warga negara.' },
    { subtest: 'TWK', question: 'Berdasarkan UUD 1945, lembaga negara yang berwenang mengubah dan menetapkan UUD adalah...', options: ['A. MPR', 'B. DPR', 'C. Presiden', 'D. Mahkamah Konstitusi'], answer: 'A. MPR', explanation: 'Menurut Pasal 3 ayat (1) UUD 1945, Majelis Permusyawaratan Rakyat (MPR) berwenang mengubah dan menetapkan undang-undang dasar.' },
    { subtest: 'TWK', question: 'Makna "Bhinneka Tunggal Ika" sebagai semboyan bangsa Indonesia adalah...', options: ['A. Bersatu dalam perbedaan', 'B. Berbeda-beda tetapi tetap satu jua', 'C. Keragaman adalah kekuatan', 'D. Persatuan adalah hal yang utama'], answer: 'B. Berbeda-beda tetapi tetap satu jua', explanation: 'Semboyan "Bhinneka Tunggal Ika" memiliki arti "Berbeda-beda tetapi tetap satu jua", menekankan persatuan di tengah keberagaman suku, agama, ras, dan antargolongan.' },
    { subtest: 'TWK', question: 'Negara Kesatuan Republik Indonesia (NKRI) menjamin keberagaman suku, agama, ras, dan antargolongan. Hal ini sejalan dengan prinsip...', options: ['A. Monokulturalisme', 'B. Heterogenitas', 'C. Pluralisme', 'D. Uniformitas'], answer: 'C. Pluralisme', explanation: 'Pluralisme adalah sikap menghargai keberagaman dan perbedaan, yang menjadi ciri khas dan kekuatan NKRI.' },

    // Bahasa Negara (5 soal)
    { subtest: 'TWK', question: 'Manakah penulisan kata serapan yang benar?', options: ['A. Efektip', 'B. Aktifitas', 'C. Standardisasi', 'D. Kualitas'], answer: 'C. Standardisasi', explanation: 'Penulisan kata serapan yang benar adalah "standardisasi" (dari "standardization"). "Efektip" seharusnya "efektif", "aktifitas" seharusnya "aktivitas", dan "kualitas" sudah benar.' },
    { subtest: 'TWK', question: 'Kalimat berikut yang menggunakan ejaan yang tepat adalah...', options: ['A. Dia membeli buku, pensil, dan pulpen.', 'B. Dimana kamu tinggal?', 'C. Saya suka membaca buku sejarah.', 'D. Para Mahasiswa sedang berdiskusi.'], answer: 'A. Dia membeli buku, pensil, dan pulpen.', explanation: 'Pilihan A menggunakan tanda koma dengan tepat dalam perincian. Pilihan B seharusnya "Di mana", Pilihan C "buku Sejarah" (jika sejarah adalah judul), Pilihan D "mahasiswa" (tidak perlu kapital).' },
    { subtest: 'TWK', question: 'Kata berimbuhan yang penulisannya tidak tepat terdapat pada kalimat...', options: ['A. Pekerjaannya dipertanggungjawabkan dengan baik.', 'B. Adik tersenyum manis kepadaku.', 'C. Ia menunjuk tangan saat ditanya.', 'D. Barang itu dijual kepada pembeli.'], answer: 'C. Ia menunjuk tangan saat ditanya.', explanation: 'Frasa yang tepat adalah "mengangkat tangan" atau "mengacungkan tangan", bukan "menunjuk tangan".' },
    { subtest: 'TWK', question: 'Perhatikan kalimat berikut: "Meskipun lelah, namun dia tetap semangat mengikuti pelatihan." Kata penghubung yang tidak tepat pada kalimat di atas adalah...', options: ['A. Meskipun', 'B. Namun', 'C. Tetap', 'D. Mengikuti'], answer: 'B. Namun', explanation: 'Penggunaan konjungsi "meskipun" dan "namun" secara bersamaan dalam satu kalimat menunjukkan kerancuan dan tidak efektif. Seharusnya salah satu dihilangkan, contoh: "Meskipun lelah, dia tetap semangat mengikuti pelatihan" atau "Dia lelah, namun dia tetap semangat mengikuti pelatihan".' },
    { subtest: 'TWK', question: 'Fungsi utama bahasa Indonesia sebagai bahasa negara adalah sebagai...', options: ['A. Bahasa pengantar dalam pendidikan', 'B. Alat perhubungan antardaerah', 'C. Simbol kebanggaan nasional', 'D. Bahasa resmi dalam penyelenggaraan negara'], answer: 'D. Bahasa resmi dalam penyelenggaraan negara', explanation: 'Selain sebagai bahasa persatuan, bahasa Indonesia juga berfungsi sebagai bahasa resmi kenegaraan, bahasa pengantar pendidikan, dan bahasa resmi dalam perhubungan pada tingkat nasional.' },

    // TWK Tambahan (5 soal untuk mencapai 30)
    { subtest: 'TWK', question: 'Sila ketiga Pancasila mengamanatkan pentingnya...', options: ['A. Keadilan sosial', 'B. Musyawarah mufakat', 'C. Persatuan Indonesia', 'D. Ketuhanan Yang Maha Esa'], answer: 'C. Persatuan Indonesia', explanation: 'Sila ketiga Pancasila adalah "Persatuan Indonesia", yang mengutamakan persatuan dan kesatuan bangsa di atas kepentingan pribadi atau golongan.' },
    { subtest: 'TWK', question: 'Dalam sejarah perumusan UUD 1945, Piagam Jakarta merupakan naskah yang dirumuskan oleh...', options: ['A. PPKI', 'B. BPUPKI', 'C. Panitia Sembilan', 'D. KNIP'], answer: 'C. Panitia Sembilan', explanation: 'Piagam Jakarta (Jakarta Charter) adalah naskah rancangan Pembukaan UUD 1945 yang dirumuskan oleh Panitia Sembilan.' },
    { subtest: 'TWK', question: 'Apabila terjadi perbedaan pendapat dalam musyawarah, sikap yang sesuai dengan nilai-nilai Pancasila adalah...', options: ['A. Memaksakan kehendak pribadi', 'B. Mengutamakan suara terbanyak tanpa diskusi', 'C. Menerima keputusan dengan lapang dada meskipun berbeda pendapat', 'D. Meninggalkan musyawarah karena tidak sepakat'], answer: 'C. Menerima keputusan dengan lapang dada meskipun berbeda pendapat', explanation: 'Sikap yang sesuai dengan Pancasila (terutama sila keempat) adalah menghargai perbedaan pendapat dan menerima hasil musyawarah dengan ikhlas.' },
    { subtest: 'TWK', question: 'Pembangunan nasional yang berkelanjutan bertujuan untuk...', options: ['A. Memaksimalkan eksploitasi sumber daya alam', 'B. Memenuhi kebutuhan generasi sekarang tanpa mengorbankan kebutuhan generasi mendatang', 'C. Meningkatkan pertumbuhan ekonomi tanpa memperhatikan lingkungan', 'D. Menjadikan Indonesia sebagai negara industri maju'], answer: 'B. Memenuhi kebutuhan generasi sekarang tanpa mengorbankan kebutuhan generasi mendatang', explanation: 'Pembangunan berkelanjutan adalah pembangunan yang memenuhi kebutuhan saat ini tanpa mengorbankan kemampuan generasi mendatang untuk memenuhi kebutuhan mereka sendiri.' },
    { subtest: 'TWK', question: 'Contoh penerapan nilai integritas dalam kehidupan sehari-hari adalah...', options: ['A. Mengerjakan tugas kuliah teman', 'B. Mencontek saat ujian agar lulus', 'C. Berkata jujur meskipun sulit', 'D. Mengambil barang yang bukan milik kita'], answer: 'C. Berkata jujur meskipun sulit', explanation: 'Integritas adalah konsistensi antara perkataan dan perbuatan, serta menjunjung tinggi kejujuran dan moralitas. Berkata jujur adalah salah satu contoh penerapannya.' },

    // --- TIU (Tes Intelegensia Umum) - 35 Soal ---
    // Kemampuan Verbal (10 soal)
    // Sinonim (3 soal)
    { subtest: 'TIU', question: 'Sinonim dari kata "OPORTUNIS" adalah...', options: ['A. Idealistis', 'B. Pragmatis', 'C. Egois', 'D. Fleksibel'], answer: 'B. Pragmatis', explanation: 'Oportunis adalah orang yang cenderung memanfaatkan kesempatan untuk keuntungan diri sendiri, seringkali dengan mengesampingkan prinsip. Ini mirip dengan sikap pragmatis yang mementingkan hasil praktis.' },
    { subtest: 'TIU', question: 'Sinonim dari "ANOMALI" adalah...', options: ['A. Normalitas', 'B. Kejanggalan', 'C. Keselarasan', 'D. Keteraturan'], answer: 'B. Kejanggalan', explanation: 'Anomali berarti penyimpangan dari yang umum atau normal; kejanggalan; kelainan.' },
    { subtest: 'TIU', question: 'Sinonim dari "KONKRET" adalah...', options: ['A. Abstrak', 'B. Nyata', 'C. Maya', 'D. Khayalan'], answer: 'B. Nyata', explanation: 'Konkret berarti nyata; berwujud; dapat dilihat atau diraba. Lawan katanya adalah abstrak.' },

    // Antonim (3 soal)
    { subtest: 'TIU', question: 'Antonim dari kata "KOHEREN" adalah...', options: ['A. Terpadu', 'B. Teratur', 'C. Kacau', 'D. Konsisten'], answer: 'C. Kacau', explanation: 'Koheren berarti berhubungan; bersatu; terpadu. Antonimnya adalah kacau atau tidak teratur.' },
    { subtest: 'TIU', question: 'Antonim dari "DEPENDEN" adalah...', options: ['A. Tergantung', 'B. Mandiri', 'C. Bergantung', 'D. Terikat'], answer: 'B. Mandiri', explanation: 'Dependen berarti bergantung atau terikat. Antonimnya adalah mandiri.' },
    { subtest: 'TIU', question: 'Antonim dari "ARTIFISIAL" adalah...', options: ['A. Buatan', 'B. Palsu', 'C. Asli', 'D. Tiruan'], answer: 'C. Asli', explanation: 'Artifisial berarti buatan atau tiruan. Antonimnya adalah asli.' },

    // Analogi (2 soal)
    { subtest: 'TIU', question: 'KULIT : BERSISIK = UDARA : ...', options: ['A. BERSIH', 'B. BERAWAN', 'C. PANAS', 'D. LEMBAB'], answer: 'B. BERAWAN', explanation: 'Hubungan antara KULIT dan BERSISIK adalah sifat atau ciri khas. Kulit (makhluk hidup tertentu) bisa bersisik. Udara (kondisi cuaca) bisa berawan.' },
    { subtest: 'TIU', question: 'PENDIDIKAN : IJAZAH = PEPERANGAN : ...', options: ['A. KEMENANGAN', 'B. MEDALI', 'C. PEJUANG', 'D. SENJATA'], answer: 'B. MEDALI', explanation: 'Ijazah adalah hasil atau tanda kelulusan dari Pendidikan. Medali adalah hasil atau tanda penghargaan dari Peperangan.' },

    // Silogisme (2 soal)
    { subtest: 'TIU', question: 'Semua siswa kelas A pandai berbahasa Inggris. Sebagian siswa kelas A mengikuti les privat. Kesimpulan yang tepat adalah...', options: ['A. Sebagian siswa yang pandai berbahasa Inggris mengikuti les privat.', 'B. Semua siswa yang mengikuti les privat pandai berbahasa Inggris.', 'C. Semua siswa kelas A mengikuti les privat.', 'D. Tidak ada siswa kelas A yang pandai berbahasa Inggris.'], answer: 'A. Sebagian siswa yang pandai berbahasa Inggris mengikuti les privat.', explanation: 'Dari premis "Semua siswa kelas A pandai berbahasa Inggris" dan "Sebagian siswa kelas A mengikuti les privat", dapat disimpulkan bahwa sebagian dari kelompok siswa kelas A yang pandai berbahasa Inggris tersebut adalah juga yang mengikuti les privat.' },
    { subtest: 'TIU', question: 'Premis 1: Jika hari hujan, maka jalanan basah. Premis 2: Jalanan tidak basah. Kesimpulan yang tepat adalah...', options: ['A. Hari hujan.', 'B. Hari tidak hujan.', 'C. Jalanan kering.', 'D. Tidak dapat disimpulkan.'], answer: 'B. Hari tidak hujan.', explanation: 'Ini adalah bentuk Modus Tollens. Jika P maka Q (Jika hujan, maka jalanan basah). Karena Q tidak terjadi (jalanan tidak basah), maka P juga tidak terjadi (hari tidak hujan).' },

    // Kemampuan Numerik (15 soal)
    // Berhitung Cepat (5 soal)
    { subtest: 'TIU', question: '25% dari 400 adalah...', options: ['A. 50', 'B. 75', 'C. 100', 'D. 125'], answer: 'C. 100', explanation: '25% = 1/4. Jadi, 1/4 * 400 = 100.' },
    { subtest: 'TIU', question: 'Hasil dari 12 x 15 - (60 : 5) adalah...', options: ['A. 168', 'B. 172', 'C. 178', 'D. 180'], answer: 'A. 168', explanation: '12 x 15 = 180. 60 : 5 = 12. Jadi, 180 - 12 = 168.' },
    { subtest: 'TIU', question: 'Jika $P = \sqrt{144}$ dan $Q = 1/2 \times 20$, maka hubungan P dan Q adalah...', options: ['A. P > Q', 'B. P < Q', 'C. P = Q', 'D. Hubungan tidak dapat ditentukan'], answer: 'B. P < Q', explanation: '$P = \sqrt{144} = 12$. $Q = 1/2 \times 20 = 10$. Jadi, $P > Q$. (Maaf, ada kesalahan penjelasan di sini, harusnya P > Q. Akan saya perbaiki di kode akhir. $P = 12, Q = 10$, jadi $P > Q$)' },
    { subtest: 'TIU', question: 'Seorang pedagang membeli 50 kg beras seharga Rp 500.000. Jika pedagang ingin mendapatkan keuntungan 20%, berapa harga jual per kg beras?', options: ['A. Rp 10.000', 'B. Rp 11.000', 'C. Rp 12.000', 'D. Rp 13.000'], answer: 'C. Rp 12.000', explanation: 'Harga beli per kg = Rp 500.000 / 50 kg = Rp 10.000/kg. Keuntungan 20% = 0.20 * Rp 10.000 = Rp 2.000. Harga jual per kg = Rp 10.000 + Rp 2.000 = Rp 12.000.' },
    { subtest: 'TIU', question: 'Berapakah nilai dari $0.05 \times 0.2 / 0.001$? ', options: ['A. 1', 'B. 10', 'C. 100', 'D. 1000'], answer: 'B. 10', explanation: '$0.05 \times 0.2 = 0.01$. $0.01 / 0.001 = 10$.' },

    // Deret Angka (5 soal)
    { subtest: 'TIU', question: 'Lanjutkan deret angka ini: 2, 4, 8, 16, ...', options: ['A. 20', 'B. 24', 'C. 32', 'D. 40'], answer: 'C. 32', explanation: 'Pola deret adalah perkalian 2. ($2 \times 2 = 4, 4 \times 2 = 8, 8 \times 2 = 16$). Maka $16 \times 2 = 32$.' },
    { subtest: 'TIU', question: 'Lanjutkan deret angka ini: 5, 10, 8, 16, 14, ...', options: ['A. 28', 'B. 26', 'C. 24', 'D. 22'], answer: 'A. 28', explanation: 'Pola deret: x2, -2, x2, -2. Jadi, 14 x 2 = 28.' },
    { subtest: 'TIU', question: 'Lanjutkan deret angka ini: 1, 1, 2, 3, 5, 8, ...', options: ['A. 11', 'B. 12', 'C. 13', 'D. 14'], answer: 'C. 13', explanation: 'Ini adalah deret Fibonacci, di mana setiap angka adalah jumlah dari dua angka sebelumnya. ($1+1=2, 1+2=3, 2+3=5, 3+5=8$). Maka $5+8=13$.' },
    { subtest: 'TIU', question: 'Lanjutkan deret angka ini: 100, 95, 85, 70, ...', options: ['A. 60', 'B. 55', 'C. 50', 'D. 45'], answer: 'C. 50', explanation: 'Pola deret adalah pengurangan bertingkat: -5, -10, -15. Maka angka selanjutnya adalah $70 - 20 = 50$.' },
    { subtest: 'TIU', question: 'Lanjutkan deret angka ini: 7, 9, 13, 19, 27, ...', options: ['A. 35', 'B. 37', 'C. 39', 'D. 41'], answer: 'B. 37', explanation: 'Pola deret adalah penambahan yang meningkat: +2, +4, +6, +8. Maka angka selanjutnya adalah $27 + 10 = 37$.' },

    // Perbandingan Kuantitatif (2 soal)
    { subtest: 'TIU', question: 'Jika $X = 3^4$ dan $Y = 4^3$, maka...', options: ['A. $X > Y$', 'B. $X < Y$', 'C. $X = Y$', 'D. Hubungan tidak dapat ditentukan'], answer: 'A. $X > Y$', explanation: '$X = 3^4 = 3 \times 3 \times 3 \times 3 = 81$. $Y = 4^3 = 4 \times 4 \times 4 = 64$. Jadi, $X > Y$.' },
    { subtest: 'TIU', question: 'Jika $P$ adalah $30\%$ dari $250$ dan $Q$ adalah $2/5$ dari $300$, maka...', options: ['A. $P > Q$', 'B. $P < Q$', 'C. $P = Q$', 'D. Hubungan tidak dapat ditentukan'], answer: 'B. $P < Q$', explanation: '$P = 0.30 \times 250 = 75$. $Q = (2/5) \times 300 = 120$. Jadi, $P < Q$.' },

    // Soal Cerita (3 soal)
    { subtest: 'TIU', question: 'Sebuah pekerjaan dapat diselesaikan oleh 8 orang dalam 20 hari. Jika pekerjaan tersebut ingin diselesaikan dalam 16 hari, berapa tambahan pekerja yang dibutuhkan?', options: ['A. 2 orang', 'B. 4 orang', 'C. 6 orang', 'D. 8 orang'], answer: 'A. 2 orang', explanation: 'Total "hari-orang" = $8 \times 20 = 160$. Jika ingin selesai 16 hari, maka dibutuhkan $160 / 16 = 10$ orang. Tambahan pekerja yang dibutuhkan adalah $10 - 8 = 2$ orang.' },
    { subtest: 'TIU', question: 'Harga satu lusin pensil adalah Rp 24.000. Jika Arman membeli 5 buah pensil, berapa yang harus dibayar Arman?', options: ['A. Rp 8.000', 'B. Rp 10.000', 'C. Rp 12.000', 'D. Rp 15.000'], answer: 'B. Rp 10.000', explanation: '1 lusin = 12 buah. Harga per pensil = Rp 24.000 / 12 = Rp 2.000. Harga 5 pensil = $5 \times Rp 2.000 = Rp 10.000$.' },
    { subtest: 'TIU', question: 'Sebuah bus melaju dengan kecepatan rata-rata 60 km/jam dari kota A ke kota B. Jika jarak antara kota A dan B adalah 210 km, berapa waktu yang dibutuhkan bus tersebut?', options: ['A. 3 jam', 'B. 3,5 jam', 'C. 4 jam', 'D. 4,5 jam'], answer: 'B. 3,5 jam', explanation: 'Waktu = Jarak / Kecepatan. Waktu = 210 km / 60 km/jam = 3.5 jam.' },

    // Kemampuan Figural (10 soal)
    // Analogi Gambar (4 soal)
    {
        subtest: 'TIU',
        question: 'Perhatikan hubungan antara gambar pertama dan kedua. Pilih gambar yang memiliki hubungan serupa dengan gambar ketiga.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="lightblue" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="20" fill="gray"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="lightgreen" stroke="black" stroke-width="2"/><rect x="30" y="30" width="40" height="40" fill="gray"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="lightcoral" stroke="black" stroke-width="2"/><polygon points="50 10, 90 90, 10 90" fill="gray"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="lightyellow" stroke="black" stroke-width="2"/><polygon points="50 10, 90 90, 10 90" fill="gray"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="lightyellow" stroke="black" stroke-width="2"/><polygon points="50 10, 90 90, 10 90" fill="gray"/></svg>`,
        explanation: 'Gambar pertama (persegi dengan lingkaran di dalamnya) berubah menjadi lingkaran dengan persegi di dalamnya (bentuk luar menjadi dalam, bentuk dalam menjadi luar). Gambar ketiga adalah lingkaran dengan segitiga di dalamnya. Maka, gambar yang sesuai adalah persegi dengan segitiga di dalamnya.'
    },
    {
        subtest: 'TIU',
        question: 'Perhatikan hubungan antara gambar pertama dan kedua. Pilih gambar yang memiliki hubungan serupa dengan gambar ketiga.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><path d="M50 10 L90 50 L50 90 L10 50 Z" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><line x1="10" y1="50" x2="90" y2="50" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><path d="M50 10 L90 50 L50 90 L10 50 Z" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="10" x2="90" y2="50" stroke="black" stroke-width="2"/><line x1="90" y1="50" x2="50" y2="90" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/><line x1="25" y1="25" x2="75" y2="75" stroke="black" stroke-width="2"/><line x1="25" y1="75" x2="75" y2="25" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/><line x1="25" y1="25" x2="75" y2="25" stroke="black" stroke-width="2"/><line x1="75" y1="25" x2="75" y2="75" stroke="black" stroke-width="2"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/><line x1="25" y1="25" x2="75" y2="75" stroke="black" stroke-width="2"/><line x1="25" y1="75" x2="75" y2="25" stroke="black" stroke-width="2"/></svg>`,
        explanation: 'Gambar pertama (belah ketupat dengan salib di dalamnya) berubah menjadi belah ketupat dengan hanya dua garis diagonal. Gambar ketiga adalah persegi dengan satu diagonal. Maka, gambar yang sesuai adalah persegi dengan dua diagonal (membentuk X).'
    },
    {
        subtest: 'TIU',
        question: 'Perhatikan hubungan antara gambar pertama dan kedua. Pilih gambar yang memiliki hubungan serupa dengan gambar ketiga.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="black" stroke-width="2"/><path d="M50 10 L50 90 M10 50 L90 50" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="black" stroke-width="2"/><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 10, 90 50, 50 90, 10 50" fill="none" stroke="black" stroke-width="2"/><path d="M50 10 L50 90 M10 50 L90 50" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 10, 90 50, 50 90, 10 50" fill="none" stroke="black" stroke-width="2"/><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 10, 90 50, 50 90, 10 50" fill="none" stroke="black" stroke-width="2"/><rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="2"/></svg>`,
        explanation: 'Gambar pertama (lingkaran dengan salib) berubah menjadi lingkaran dengan persegi di dalamnya. Hubungan ini adalah penggantian bentuk internal. Gambar ketiga adalah belah ketupat dengan salib di dalamnya. Maka, gambar yang sesuai adalah belah ketupat dengan persegi di dalamnya.'
    },
    {
        subtest: 'TIU',
        question: 'Perhatikan hubungan antara gambar pertama dan kedua. Pilih gambar yang memiliki hubungan serupa dengan gambar ketiga.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><path d="M10 10 L90 10 L90 90 L10 90 Z" fill="none" stroke="black" stroke-width="2"/><line x1="10" y1="10" x2="90" y2="90" stroke="red" stroke-width="3"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><path d="M10 10 L90 10 L90 90 L10 90 Z" fill="none" stroke="black" stroke-width="2"/><line x1="10" y1="90" x2="90" y2="10" stroke="red" stroke-width="3"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="black" stroke-width="2"/><line x1="10" y1="50" x2="90" y2="50" stroke="red" stroke-width="3"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="10" x2="50" y2="90" stroke="red" stroke-width="3"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="10" x2="50" y2="90" stroke="red" stroke-width="3"/></svg>`,
        explanation: 'Gambar pertama (persegi dengan diagonal kiri atas ke kanan bawah) berubah menjadi persegi dengan diagonal kanan atas ke kiri bawah (rotasi diagonal). Gambar ketiga adalah lingkaran dengan garis horizontal. Maka, gambar yang sesuai adalah lingkaran dengan garis vertikal (rotasi garis).'
    },

    // Ketidaksesuaian/Klasifikasi Gambar (3 soal)
    {
        subtest: 'TIU',
        question: 'Pilih gambar yang tidak sesuai dengan kelompoknya.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" fill="blue"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="25" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 25, 75 75, 25 75" fill="green"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" fill="purple" transform="rotate(45 50 50)"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="25" fill="red"/></svg>`,
        explanation: 'Semua gambar kecuali lingkaran adalah bentuk segi (persegi, segitiga, belah ketupat/persegi yang diputar). Lingkaran adalah bentuk kurva.'
    },
    {
        subtest: 'TIU',
        question: 'Pilih gambar yang tidak sesuai dengan kelompoknya.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="white" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="10" fill="black"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="white" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="10" fill="black"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 10, 90 50, 50 90, 10 50" fill="white" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="10" fill="black"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><line x1="20" y1="50" x2="80" y2="50" stroke="black" stroke-width="2"/><line x1="50" y1="20" x2="50" y2="80" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="10" fill="black"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><line x1="20" y1="50" x2="80" y2="50" stroke="black" stroke-width="2"/><line x1="50" y1="20" x2="50" y2="80" stroke="black" stroke-width="2"/><circle cx="50" cy="50" r="10" fill="black"/></svg>`,
        explanation: 'Semua gambar kecuali yang terakhir menampilkan bentuk geometri dasar dengan lingkaran kecil di tengahnya. Gambar terakhir adalah salib dengan lingkaran di tengah, bukan bentuk dasar tunggal.'
    },
    {
        subtest: 'TIU',
        question: 'Pilih gambar yang tidak sesuai dengan kelompoknya.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="20 20, 80 20, 80 80, 20 80" fill="none" stroke="black" stroke-width="2"/><line x1="20" y1="20" x2="80" y2="80" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="20 20, 80 20, 50 80" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="80" x2="50" y2="20" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="30" fill="none" stroke="black" stroke-width="2"/><line x1="20" y1="50" x2="80" y2="50" stroke="black" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="20 50, 50 20, 80 50, 50 80" fill="none" stroke="black" stroke-width="2"/><line x1="50" y1="20" x2="50" y2="80" stroke="black" stroke-width="2"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="30" fill="none" stroke="black" stroke-width="2"/><line x1="20" y1="50" x2="80" y2="50" stroke="black" stroke-width="2"/></svg>`,
        explanation: 'Semua gambar kecuali lingkaran adalah poligon dengan satu garis tambahan di dalamnya. Lingkaran adalah bentuk kurva.'
    },

    // Serial Gambar (3 soal)
    {
        subtest: 'TIU',
        question: 'Pilih gambar selanjutnya dalam seri.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="blue" rx="10" ry="10"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="blue"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="blue"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><polygon points="50 10, 90 90, 10 90" fill="blue"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" fill="blue"/></svg>`,
        explanation: 'Seri ini menunjukkan perubahan dari bentuk persegi dengan sudut membulat menjadi bentuk persegi dengan sudut tajam. Jadi, gambar selanjutnya adalah persegi tanpa sudut membulat.'
    },
    {
        subtest: 'TIU',
        question: 'Pilih gambar selanjutnya dalam seri.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><circle cx="50" cy="10" r="5" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><circle cx="90" cy="50" r="5" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><circle cx="50" cy="90" r="5" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><circle cx="10" cy="50" r="5" fill="red"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/><circle cx="90" cy="50" r="5" fill="red"/></svg>`,
        explanation: 'Dalam seri ini, titik merah bergerak searah jarum jam di sekeliling lingkaran. Urutannya adalah atas, kanan, bawah. Maka, titik selanjutnya adalah di kiri.'
    },
    {
        subtest: 'TIU',
        question: 'Pilih gambar selanjutnya dalam seri.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="none"/><line x1="10" y1="10" x2="90" y2="90" stroke="red" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="none"/><line x1="90" y1="10" x2="10" y2="90" stroke="red" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="none"/><line x1="10" y1="50" x2="90" y2="50" stroke="red" stroke-width="2"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="none"/><line x1="50" y1="10" x2="50" y2="90" stroke="red" stroke-width="2"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="none"/><line x1="10" y1="10" x2="90" y2="90" stroke="red" stroke-width="2"/></svg>`,
        explanation: 'Seri ini menunjukkan rotasi garis di dalam persegi: diagonal kanan-bawah, diagonal kiri-bawah, horizontal, vertikal. Maka, gambar selanjutnya akan kembali ke diagonal kanan-bawah.'
    },

    // TIU Tambahan (15 soal untuk mencapai 35)
    { subtest: 'TIU', question: 'Jika $A = 5$ dan $B = 7$, maka $3A + 2B = \dots$', options: ['A. 29', 'B. 30', 'C. 31', 'D. 32'], answer: 'A. 29', explanation: '$3 \times 5 + 2 \times 7 = 15 + 14 = 29$.' },
    { subtest: 'TIU', question: 'Berapakah nilai dari $15^2 - 10^2$? ', options: ['A. 25', 'B. 125', 'C. 150', 'D. 225'], answer: 'B. 125', explanation: '$15^2 = 225$. $10^2 = 100$. $225 - 100 = 125$.' },
    { subtest: 'TIU', question: 'Deret: $4, 9, 16, 25, \dots$', options: ['A. 30', 'B. 36', 'C. 49', 'D. 64'], answer: 'B. 36', explanation: 'Pola deret adalah kuadrat dari bilangan asli berurutan: $2^2, 3^2, 4^2, 5^2$. Maka selanjutnya adalah $6^2 = 36$.' },
    { subtest: 'TIU', question: 'Sinonim dari "INISIATIF" adalah...', options: ['A. Pasif', 'B. Gagasan', 'C. Tanggapan', 'D. Penundaan'], answer: 'B. Gagasan', explanation: 'Inisiatif berarti prakarsa; gagasan; upaya pertama.' },
    { subtest: 'TIU', question: 'Antonim dari "OPTIMIS" adalah...', options: ['A. Pesimis', 'B. Realistis', 'C. Positif', 'D. Antusias'], answer: 'A. Pesimis', explanation: 'Optimis berarti bersifat mengharapkan hasil yang baik. Antonimnya adalah pesimis, yaitu orang yang selalu berpandangan tidak baik.' },
    { subtest: 'TIU', question: 'Jika $x = 1/3 \times 90$ dan $y = 0.5 \times 60$, maka...', options: ['A. $x > y$', 'B. $x < y$', 'C. $x = y$', 'D. Hubungan tidak dapat ditentukan'], answer: 'C. $x = y$', explanation: '$x = 1/3 \times 90 = 30$. $y = 0.5 \times 60 = 30$. Jadi, $x = y$.' },
    { subtest: 'TIU', question: 'Seorang pekerja dapat menyelesaikan 20 lembar laporan dalam 4 jam. Berapa lembar laporan yang dapat ia selesaikan dalam 7 jam?', options: ['A. 30', 'B. 35', 'C. 40', 'D. 45'], answer: 'B. 35', explanation: 'Kecepatan kerja = 20 lembar / 4 jam = 5 lembar/jam. Dalam 7 jam, ia dapat menyelesaikan $5 \times 7 = 35$ lembar laporan.' },
    { subtest: 'TIU', question: 'Deret: $1, 4, 2, 8, 4, \dots$', options: ['A. 12', 'B. 16', 'C. 18', 'D. 20'], answer: 'B. 16', explanation: 'Pola deret bergantian: $1 \times 4 = 4$, $4 \div 2 = 2$, $2 \times 4 = 8$, $8 \div 2 = 4$. Maka selanjutnya adalah $4 \times 4 = 16$.' },
    { subtest: 'TIU', question: 'ANAK : AYAH = BUAH : ...', options: ['A. POHON', 'B. AKAR', 'C. DAUN', 'D. BUNGA'], answer: 'A. POHON', explanation: 'Hubungan antara Anak dan Ayah adalah asal-usul (anak berasal dari ayah). Buah berasal dari Pohon.' },
    { subtest: 'TIU', question: 'Jika semua A adalah B, dan semua C adalah A, maka...', options: ['A. Semua B adalah C', 'B. Semua C adalah B', 'C. Beberapa B adalah C', 'D. Tidak dapat disimpulkan'], answer: 'B. Semua C adalah B', explanation: 'Jika C adalah subset dari A, dan A adalah subset dari B, maka C juga harus menjadi subset dari B.' },
    { subtest: 'TIU', question: 'Sebuah kolam diisi air melalui dua keran. Keran A dapat mengisi kolam penuh dalam 6 jam, dan keran B dalam 3 jam. Jika kedua keran dibuka bersamaan, berapa waktu yang dibutuhkan untuk mengisi kolam hingga penuh?', options: ['A. 1 jam', 'B. 1.5 jam', 'C. 2 jam', 'D. 2.5 jam'], answer: 'C. 2 jam', explanation: 'Kecepatan A = 1/6 kolam/jam. Kecepatan B = 1/3 kolam/jam. Kecepatan gabungan = $1/6 + 1/3 = 1/6 + 2/6 = 3/6 = 1/2$ kolam/jam. Waktu = 1 / (1/2) = 2 jam.' },
    { subtest: 'TIU', question: 'Jika $X = 35\%$ dari $200$ dan $Y = 70$, maka hubungan antara X dan Y adalah...', options: ['A. $X > Y$', 'B. $X < Y$', 'C. $X = Y$', 'D. Hubungan tidak dapat ditentukan'], answer: 'C. $X = Y$', explanation: '$X = 0.35 \times 200 = 70$. $Y = 70$. Jadi, $X = Y$.' },
    { subtest: 'TIU', question: 'Hasil dari $(20 - 5) \times 4 + 10$ adalah...', options: ['A. 70', 'B. 60', 'C. 50', 'D. 40'], answer: 'A. 70', explanation: '$(20 - 5) = 15$. $15 \times 4 = 60$. $60 + 10 = 70$.' },
    { subtest: 'TIU', question: 'Deret: $1, 2, 6, 24, \dots$', options: ['A. 60', 'B. 96', 'C. 120', 'D. 144'], answer: 'C. 120', explanation: 'Pola deret adalah perkalian berurutan: $1 \times 2 = 2$, $2 \times 3 = 6$, $6 \times 4 = 24$. Maka selanjutnya adalah $24 \times 5 = 120$.' },
    {
        subtest: 'TIU',
        question: 'Pilih gambar selanjutnya dalam seri.',
        options: [
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="yellow"/><circle cx="50" cy="50" r="15" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="yellow"/><circle cx="50" cy="50" r="25" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="yellow"/><circle cx="50" cy="50" r="35" fill="red"/></svg>`,
            `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="yellow"/><circle cx="50" cy="50" r="45" fill="red"/></svg>`
        ],
        answer: `<svg width="60" height="60" viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" stroke-width="2" fill="yellow"/><circle cx="50" cy="50" r="35" fill="red"/></svg>`,
        explanation: 'Seri ini menunjukkan lingkaran di tengah persegi yang terus membesar. Lingkaran pertama memiliki radius kecil, lalu sedang, lalu besar. Maka, gambar selanjutnya adalah lingkaran yang lebih besar lagi.'
    },

    // --- TKP (Tes Karakteristik Pribadi) - 45 Soal ---
    // Pelayanan Publik (5 soal)
    { subtest: 'TKP', question: 'Anda adalah seorang petugas pelayanan publik. Seorang warga datang dengan keluhan yang kompleks dan tidak sabar. Sikap Anda adalah...', options: ['A. Menyuruhnya untuk kembali lagi nanti saat sudah tenang', 'B. Mendengarkan dengan sabar, mencatat keluhan, dan menjelaskan prosedur dengan tenang', 'C. Memintanya untuk mengisi formulir keluhan dan menunggu tanpa penjelasan', 'D. Mengabaikannya karena sikapnya yang tidak sabar'], answer: 'B. Mendengarkan dengan sabar, mencatat keluhan, dan menjelaskan prosedur dengan tenang', explanation: 'Prinsip pelayanan publik adalah melayani dengan sabar, responsif, dan memberikan informasi yang jelas, bahkan dalam situasi sulit.' },
    { subtest: 'TKP', question: 'Seorang lansia datang ke kantor Anda untuk mengurus dokumen, namun kesulitan memahami alur prosedur. Apa yang Anda lakukan?', options: ['A. Memberikan formulir dan menyuruhnya membaca petunjuk', 'B. Menjelaskan secara singkat dan cepat agar tidak membuang waktu', 'C. Membantu mengisi formulir dan menjelaskan langkah demi langkah dengan sabar', 'D. Memintanya didampingi anggota keluarga'], answer: 'C. Membantu mengisi formulir dan menjelaskan langkah demi langkah dengan sabar', explanation: 'Pelayanan publik yang baik harus inklusif, sabar, dan proaktif membantu kelompok rentan seperti lansia agar mereka dapat mengakses layanan dengan mudah.' },
    { subtest: 'TKP', question: 'Instansi Anda berencana melakukan digitalisasi layanan untuk mempercepat proses. Namun, banyak warga yang masih gagap teknologi. Sikap Anda adalah...', options: ['A. Tetap melaksanakan digitalisasi tanpa peduli kondisi warga', 'B. Menunda digitalisasi sampai semua warga siap', 'C. Menyediakan loket bantuan dan sosialisasi intensif untuk membantu warga beradaptasi', 'D. Menyediakan panduan tertulis yang rumit'], answer: 'C. Menyediakan loket bantuan dan sosialisasi intensif untuk membantu warga beradaptasi', explanation: 'Inovasi harus diimbangi dengan kesiapan pengguna. Menyediakan bantuan dan sosialisasi adalah cara terbaik untuk memastikan digitalisasi berjalan lancar dan inklusif.' },
    { subtest: 'TKP', question: 'Ketika jam istirahat, ada seorang warga yang datang dan meminta bantuan segera. Apa yang Anda lakukan?', options: ['A. Menolak karena sudah jam istirahat', 'B. Melayani sebentar jika tidak terlalu lama, lalu melanjutkan istirahat', 'C. Mengarahkan ke petugas lain yang sedang tidak istirahat jika ada, atau melayani setelah istirahat jika darurat', 'D. Memberi tahu bahwa ia datang di waktu yang salah'], answer: 'C. Mengarahkan ke petugas lain yang sedang tidak istirahat jika ada, atau melayani setelah istirahat jika darurat', explanation: 'Profesionalisme dalam pelayanan publik berarti tetap responsif terhadap kebutuhan warga, bahkan di luar jam kerja jika situasinya mendesak, atau memastikan ada mekanisme pelayanan pengganti.' },
    { subtest: 'TKP', question: 'Anda menerima kritik pedas dari warga mengenai kinerja unit Anda. Reaksi Anda adalah...', options: ['A. Merasa kesal dan mengabaikan kritik tersebut', 'B. Membalas kritik dengan argumen yang membela diri', 'C. Menerima kritik sebagai masukan, mengevaluasi, dan mencari solusi perbaikan', 'D. Mencari tahu siapa warga yang mengkritik untuk diajak berdebat'], answer: 'C. Menerima kritik sebagai masukan, mengevaluasi, dan mencari solusi perbaikan', explanation: 'Kritik, terutama dari publik, harus dilihat sebagai kesempatan untuk introspeksi dan perbaikan, bukan sebagai serangan pribadi.' },

    // Jejaring Kerja (5 soal)
    { subtest: 'TKP', question: 'Dalam sebuah proyek tim, salah satu anggota tim Anda kurang aktif dan sering telat dalam menyelesaikan bagiannya. Apa yang Anda lakukan sebagai pemimpin tim?', options: ['A. Membiarkannya saja karena ia akan sadar sendiri', 'B. Melaporkan langsung kepada atasan untuk diberikan teguran', 'C. Mendekati secara personal, menanyakan kendala, dan menawarkan bantuan atau solusi', 'D. Mengambil alih pekerjaannya agar proyek tetap berjalan'], answer: 'C. Mendekati secara personal, menanyakan kendala, dan menawarkan bantuan atau solusi', explanation: 'Jejaring kerja yang efektif memerlukan komunikasi, empati, dan kemampuan untuk memotivasi serta mencari solusi bersama untuk masalah tim.' },
    { subtest: 'TKP', question: 'Anda ditugaskan bekerja sama dengan instansi lain yang memiliki budaya kerja berbeda. Sikap Anda adalah...', options: ['A. Memaksakan budaya kerja instansi Anda', 'B. Bersikap acuh tak acuh dan hanya fokus pada tugas sendiri', 'C. Berusaha memahami budaya kerja mereka dan mencari titik temu untuk kolaborasi yang efektif', 'D. Mengeluh kepada atasan tentang kesulitan koordinasi'], answer: 'C. Berusaha memahami budaya kerja mereka dan mencari titik temu untuk kolaborasi yang efektif', explanation: 'Kolaborasi yang sukses membutuhkan adaptasi dan kemampuan untuk menjalin hubungan baik dengan pihak lain, termasuk memahami perbedaan budaya kerja.' },
    { subtest: 'TKP', question: 'Untuk meningkatkan kualitas kerja tim, Anda berinisiatif mengadakan sesi berbagi pengetahuan dan pengalaman. Namun, beberapa rekan kerja kurang antusias. Apa yang Anda lakukan?', options: ['A. Membatalkan inisiatif karena tidak didukung', 'B. Tetap mengadakan, namun hanya untuk yang antusias saja', 'C. Menjelaskan manfaatnya secara persuasif dan mencari format yang menarik agar lebih banyak yang berpartisipasi', 'D. Memaksa semua rekan kerja untuk ikut'], answer: 'C. Menjelaskan manfaatnya secara persuasif dan mencari format yang menarik agar lebih banyak yang berpartisipasi', explanation: 'Membangun jejaring kerja yang kuat berarti mampu memotivasi dan melibatkan rekan kerja melalui pendekatan yang persuasif dan adaptif.' },
    { subtest: 'TKP', question: 'Anda diminta untuk memimpin sebuah tim lintas divisi yang belum pernah bekerja sama sebelumnya. Langkah pertama yang Anda ambil adalah...', options: ['A. Langsung membagi tugas berdasarkan keahlian masing-masing', 'B. Mengadakan pertemuan perkenalan dan membangun kesepahaman visi bersama', 'C. Menentukan target dan deadline yang ketat', 'D. Meminta setiap anggota tim membuat laporan kemajuan individu'], answer: 'B. Mengadakan pertemuan perkenalan dan membangun kesepahaman visi bersama', explanation: 'Membangun jejaring kerja tim yang baru dimulai dengan membangun rapport, saling mengenal, dan menyepakati tujuan bersama untuk menciptakan fondasi kolaborasi yang solid.' },
    { subtest: 'TKP', question: 'Ketika ada konflik antar anggota tim, sikap Anda sebagai bagian dari tim adalah...', options: ['A. Memihak salah satu anggota yang dianggap benar', 'B. Menjaga jarak dan tidak ikut campur', 'C. Mencoba menjadi penengah dan memfasilitasi komunikasi untuk mencari solusi', 'D. Melaporkan konflik tersebut kepada atasan dan membiarkan atasan yang menyelesaikannya'], answer: 'C. Mencoba menjadi penengah dan memfasilitasi komunikasi untuk mencari solusi', explanation: 'Kemampuan berjejaring juga mencakup keterampilan manajemen konflik dan membangun hubungan yang harmonis dalam tim.' },

    // Sosial Budaya (5 soal)
    { subtest: 'TKP', question: 'Anda ditempatkan di daerah baru dengan adat istiadat dan kebiasaan masyarakat yang sangat berbeda dari daerah asal Anda. Sikap Anda adalah...', options: ['A. Berpegang teguh pada kebiasaan sendiri dan menghindari interaksi berlebihan', 'B. Mengkritik kebiasaan setempat yang dianggap tidak sesuai', 'C. Berusaha mempelajari dan menghormati adat istiadat setempat serta beradaptasi', 'D. Meminta dipindahkan ke daerah yang lebih familiar'], answer: 'C. Berusaha mempelajari dan menghormati adat istiadat setempat serta beradaptasi', explanation: 'ASN diharapkan mampu beradaptasi dan menghargai keberagaman sosial budaya di manapun ia ditempatkan, menunjukkan sikap inklusif dan toleran.' },
    { subtest: 'TKP', question: 'Saat acara kantor, disajikan makanan tradisional dari berbagai daerah. Salah satu makanan tidak sesuai dengan selera Anda. Apa yang Anda lakukan?', options: ['A. Tidak menyentuh makanan tersebut sama sekali', 'B. Mengambil sedikit untuk mencoba sebagai bentuk apresiasi', 'C. Menolak dengan sopan dan mencari makanan lain', 'D. Mengambil dan membuangnya tanpa diketahui orang lain'], answer: 'B. Mengambil sedikit untuk mencoba sebagai bentuk apresiasi', explanation: 'Menghargai keragaman sosial budaya berarti menunjukkan sikap toleransi dan apresiasi, meskipun selera pribadi berbeda.' },
    { subtest: 'TKP', question: 'Anda diundang ke acara komunitas lokal yang mayoritas pesertanya memiliki latar belakang suku dan agama yang berbeda dengan Anda. Apa yang Anda lakukan?', options: ['A. Menolak undangan karena merasa tidak nyaman', 'B. Hadir hanya sebentar untuk formalitas', 'C. Hadir dengan pikiran terbuka, berinteraksi dan belajar tentang budaya mereka', 'D. Berusaha mengubah pandangan mereka agar sesuai dengan pandangan Anda'], answer: 'C. Hadir dengan pikiran terbuka, berinteraksi dan belajar tentang budaya mereka', explanation: 'Sikap positif terhadap keberagaman sosial budaya mencakup keinginan untuk berinteraksi, belajar, dan memperkaya wawasan dari perbedaan.' },
    { subtest: 'TKP', question: 'Di lingkungan kerja Anda, terdapat berbagai latar belakang karyawan. Untuk menghindari konflik dan meningkatkan kebersamaan, Anda berinisiatif untuk...', options: ['A. Membentuk kelompok berdasarkan suku asal', 'B. Mengadakan kegiatan yang mendorong interaksi antarbudaya', 'C. Meminimalkan komunikasi antar karyawan dengan latar belakang berbeda', 'D. Hanya berinteraksi dengan rekan yang memiliki kesamaan'], answer: 'B. Mengadakan kegiatan yang mendorong interaksi antarbudaya', explanation: 'Mendorong kegiatan yang melibatkan berbagai latar belakang adalah cara efektif untuk membangun harmoni dan saling pengertian di lingkungan kerja yang beragam.' },
    { subtest: 'TKP', question: 'Seorang rekan kerja sering menggunakan bahasa daerahnya di lingkungan kantor. Beberapa rekan lain merasa kurang nyaman. Sebagai seorang ASN, sikap Anda adalah...', options: ['A. Meminta rekan tersebut untuk berhenti menggunakan bahasa daerahnya', 'B. Mengabaikannya karena itu hak setiap orang', 'C. Menyarankan penggunaan bahasa Indonesia sebagai bahasa komunikasi utama di lingkungan kantor, namun tetap menghargai penggunaan bahasa daerah di luar konteks formal', 'D. Ikut-ikutan menggunakan bahasa daerah agar tidak ketinggalan'], answer: 'C. Menyarankan penggunaan bahasa Indonesia sebagai bahasa komunikasi utama di lingkungan kantor, namun tetap menghargai penggunaan bahasa daerah di luar konteks formal', explanation: 'Menjaga profesionalisme dan efektivitas komunikasi di lingkungan kerja, sambil tetap menghargai keberagaman bahasa sebagai bagian dari budaya.' },

    // TIK (Teknologi Informasi dan Komunikasi) (5 soal)
    { subtest: 'TKP', question: 'Instansi Anda baru menerapkan sistem e-office. Beberapa rekan kerja kesulitan menggunakannya. Apa yang Anda lakukan?', options: ['A. Mengeluh karena sistem baru membuat kerja lebih lambat', 'B. Belajar mandiri dan tidak peduli rekan lain', 'C. Membantu rekan kerja yang kesulitan dan berbagi tips penggunaan sistem', 'D. Menyuruh mereka untuk belajar sendiri karena sudah ada pelatihan'], answer: 'C. Membantu rekan kerja yang kesulitan dan berbagi tips penggunaan sistem', explanation: 'ASN yang adaptif TIK akan proaktif membantu rekan kerja untuk meningkatkan literasi digital dan memastikan transisi ke sistem baru berjalan lancar.' },
    { subtest: 'TKP', question: 'Anda mendapatkan email mencurigakan yang meminta data pribadi. Apa tindakan yang paling tepat?', options: ['A. Langsung membuka email tersebut dan mengklik tautannya', 'B. Membalas email tersebut untuk meminta klarifikasi', 'C. Menghapus email tersebut tanpa membukanya dan melaporkannya sebagai spam/phishing', 'D. Meneruskan email tersebut ke teman-teman untuk ditanyakan pendapatnya'], answer: 'C. Menghapus email tersebut tanpa membukanya dan melaporkannya sebagai spam/phishing', explanation: 'Kewaspadaan terhadap keamanan informasi dan serangan siber adalah penting dalam penggunaan TIK. Menghapus dan melaporkan email mencurigakan adalah tindakan yang benar.' },
    { subtest: 'TKP', question: 'Untuk meningkatkan efisiensi kerja, Anda mencari aplikasi atau software baru yang dapat mendukung pekerjaan Anda. Apa yang Anda lakukan?', options: ['A. Langsung menginstal aplikasi yang ditemukan dari internet', 'B. Meminta izin dan rekomendasi dari bagian TIK atau atasan sebelum menginstal', 'C. Menginstal tanpa izin dan berharap tidak ada masalah', 'D. Menunggu instruksi dari kantor untuk penggunaan aplikasi baru'], answer: 'B. Meminta izin dan rekomendasi dari bagian TIK atau atasan sebelum menginstal', explanation: 'Penggunaan TIK yang profesional melibatkan kepatuhan terhadap kebijakan IT instansi dan mencari rekomendasi untuk memastikan kompatibilitas dan keamanan.' },
    { subtest: 'TKP', question: 'Anda diminta untuk menyajikan data hasil kerja dalam bentuk presentasi digital. Namun, Anda merasa tidak mahir menggunakan perangkat lunak presentasi. Sikap Anda adalah...', options: ['A. Meminta rekan kerja untuk membuatkan presentasi', 'B. Mencoba membuat presentasi seadanya meskipun hasilnya kurang baik', 'C. Belajar secara mandiri dari tutorial atau meminta bantuan singkat dari rekan yang ahli', 'D. Menolak tugas tersebut dengan alasan tidak bisa'], answer: 'C. Belajar secara mandiri dari tutorial atau meminta bantuan singkat dari rekan yang ahli', explanation: 'Kemampuan TIK mencakup kemauan untuk belajar dan mengembangkan diri, serta memanfaatkan sumber daya yang ada (tutorial, bantuan rekan) untuk menyelesaikan tugas.' },
    { subtest: 'TKP', question: 'Kantor Anda akan menerapkan sistem absensi berbasis sidik jari. Namun, sistem sering mengalami gangguan. Apa yang Anda lakukan?', options: ['A. Kembali ke sistem absensi manual tanpa melaporkan gangguan', 'B. Mengeluh kepada rekan kerja tentang sistem yang buruk', 'C. Melaporkan gangguan kepada bagian TIK dan mencari solusi alternatif sementara', 'D. Tidak melakukan absensi hingga sistem diperbaiki'], answer: 'C. Melaporkan gangguan kepada bagian TIK dan mencari solusi alternatif sementara', explanation: 'Responsif terhadap masalah TIK, proaktif melaporkan, dan mencari solusi sementara untuk menjaga produktivitas adalah sikap yang baik.' },

    // Profesionalisme (5 soal)
    { subtest: 'TKP', question: 'Anda diberikan tugas yang sangat penting dan memiliki tenggat waktu yang ketat. Meskipun ada beberapa kendala, sikap profesional Anda adalah...', options: ['A. Menyerah dan meminta perpanjangan waktu', 'B. Mengerjakan seadanya yang penting selesai', 'C. Berusaha semaksimal mungkin untuk menyelesaikan tepat waktu dengan kualitas terbaik', 'D. Delegasikan kepada rekan kerja lain'], answer: 'C. Berusaha semaksimal mungkin untuk menyelesaikan tepat waktu dengan kualitas terbaik', explanation: 'Profesionalisme ditunjukkan dengan komitmen tinggi terhadap tugas, bertanggung jawab, dan berusaha mencapai kualitas terbaik meskipun di bawah tekanan.' },
    { subtest: 'TKP', question: 'Dalam pekerjaan, Anda menemukan cara baru yang lebih efisien, namun hal itu belum diatur dalam prosedur standar. Apa yang Anda lakukan?', options: ['A. Mengabaikan cara baru tersebut dan tetap mengikuti prosedur lama', 'B. Menerapkan cara baru secara diam-diam', 'C. Mengusulkan cara baru tersebut kepada atasan atau tim untuk dievaluasi dan dipertimbangkan sebagai perbaikan prosedur', 'D. Membahasnya hanya dengan rekan terdekat'], answer: 'C. Mengusulkan cara baru tersebut kepada atasan atau tim untuk dievaluasi dan dipertimbangkan sebagai perbaikan prosedur', explanation: 'Profesionalisme juga mencakup inisiatif untuk meningkatkan efisiensi dan kualitas kerja, serta berani mengusulkan ide-ide inovatif melalui jalur yang tepat.' },
    { subtest: 'TKP', question: 'Anda diminta melakukan pekerjaan yang sebenarnya bukan termasuk deskripsi tugas Anda, namun sangat penting untuk keberlangsungan tim. Apa yang Anda lakukan?', options: ['A. Menolak dengan alasan bukan tugas Anda', 'B. Mengerjakan dengan setengah hati', 'C. Menerima dan mengerjakan dengan penuh tanggung jawab demi kepentingan tim/organisasi', 'D. Mengerjakan jika ada imbalan tambahan'], answer: 'C. Menerima dan mengerjakan dengan penuh tanggung jawab demi kepentingan tim/organisasi', explanation: 'Profesionalisme ditunjukkan dengan sikap fleksibel dan berorientasi pada kepentingan organisasi, bahkan jika itu berarti mengambil tugas di luar deskripsi pekerjaan formal.' },
    { subtest: 'TKP', question: 'Ketika Anda menghadapi masalah atau hambatan dalam pekerjaan, sikap profesional Anda adalah...', options: ['A. Berhenti bekerja dan menunggu masalah selesai dengan sendirinya', 'B. Menyalahkan pihak lain atas masalah tersebut', 'C. Menganalisis masalah, mencari akar penyebab, dan mengusulkan solusi', 'D. Mengeluh kepada semua orang tentang masalah tersebut'], answer: 'C. Menganalisis masalah, mencari akar penyebab, dan mengusulkan solusi', explanation: 'Profesionalisme mencakup kemampuan problem-solving, proaktif dalam mencari solusi, dan tidak mudah menyerah di hadapan hambatan.' },
    { subtest: 'TKP', question: 'Seorang ASN harus memiliki komitmen terhadap pekerjaannya. Salah satu bentuk komitmen tersebut adalah...', options: ['A. Bekerja sesuai jam kerja saja tanpa lebih', 'B. Memprioritaskan kepentingan pribadi di atas pekerjaan', 'C. Menjalankan tugas dan fungsi dengan penuh dedikasi dan akuntabilitas', 'D. Mengharapkan pengakuan dan pujian atas setiap pekerjaan yang dilakukan'], answer: 'C. Menjalankan tugas dan fungsi dengan penuh dedikasi dan akuntabilitas', explanation: 'Komitmen profesional berarti menjalankan tugas dengan penuh dedikasi, bertanggung jawab, dan selalu berusaha memberikan yang terbaik untuk organisasi.' },

    // Anti Radikalisme (5 soal)
    { subtest: 'TKP', question: 'Anda mendengar rekan kerja sering menyebarkan ujaran kebencian dan konten yang provokatif di media sosial. Sikap Anda adalah...', options: ['A. Mengabaikannya karena itu urusan pribadi', 'B. Ikut menyukai atau membagikan konten tersebut', 'C. Menegur secara personal dan menjelaskan bahaya penyebaran paham radikal, serta melaporkan jika terus berlanjut', 'D. Menjauhinya dan tidak berinteraksi lagi'], answer: 'C. Menegur secara personal dan menjelaskan bahaya penyebaran paham radikal, serta melaporkan jika terus berlanjut', explanation: 'Sikap anti radikalisme tidak hanya menolak, tetapi juga proaktif mencegah penyebaran paham tersebut, dimulai dari lingkungan terdekat.' },
    { subtest: 'TKP', question: 'Di lingkungan tempat tinggal Anda, muncul kelompok yang menunjukkan ciri-ciri intoleransi dan anti-Pancasila. Apa yang Anda lakukan?', options: ['A. Menghindari berinteraksi dengan kelompok tersebut', 'B. Melaporkan kepada pihak berwenang (RT/RW/Kepolisian) dengan bukti yang cukup', 'C. Mengajak mereka berdebat secara terbuka', 'D. Bergabung dengan kelompok tersebut untuk mencari informasi'], answer: 'B. Melaporkan kepada pihak berwenang (RT/RW/Kepolisian) dengan bukti yang cukup', explanation: 'Melaporkan kepada pihak berwenang adalah langkah yang tepat untuk mengatasi potensi penyebaran paham radikal yang mengancam persatuan bangsa.' },
    { subtest: 'TKP', question: 'Sebagai ASN, Anda melihat adanya indikasi penyebaran paham radikal di lingkungan instansi Anda. Sikap yang paling tepat adalah...', options: ['A. Diam saja agar tidak terjadi keributan', 'B. Melaporkan kepada atasan dan pihak yang berwenang untuk ditindaklanjuti secara proporsional', 'C. Berdiskusi dengan teman sejawat untuk mencari cara mengatasinya secara sembunyi-sembunyi', 'D. Memberikan ceramah agama untuk meluruskan paham tersebut'], answer: 'B. Melaporkan kepada atasan dan pihak yang berwenang untuk ditindaklanjuti secara proporsional', explanation: 'ASN memiliki kewajiban untuk menjaga ideologi negara. Melaporkan indikasi radikalisme di lingkungan kerja adalah bentuk integritas dan bela negara.' },
    { subtest: 'TKP', question: 'Untuk menangkal paham radikalisme di masyarakat, peran ASN yang paling efektif adalah...', options: ['A. Menjadi agen penyebar ideologi pemerintah', 'B. Mengedukasi masyarakat tentang pentingnya toleransi dan nilai-nilai Pancasila', 'C. Hanya berfokus pada tugas administratif', 'D. Menyediakan fasilitas untuk kegiatan keagamaan eksklusif'], answer: 'B. Mengedukasi masyarakat tentang pentingnya toleransi dan nilai-nilai Pancasila', explanation: 'Peran ASN dalam menangkal radikalisme adalah melalui edukasi, sosialisasi nilai-nilai kebangsaan, dan mempromosikan toleransi serta moderasi.' },
    { subtest: 'TKP', question: 'Ketika Anda berhadapan dengan argumen atau pandangan yang cenderung radikal, sikap Anda seharusnya...', options: ['A. Membalas dengan argumen yang sama radikalnya', 'B. Menolak secara tegas tanpa memberikan penjelasan', 'C. Memberikan penjelasan yang logis dan persuasif berdasarkan Pancasila dan UUD 1945', 'D. Mengabaikan dan tidak merespon sama sekali'], answer: 'C. Memberikan penjelasan yang logis dan persuasif berdasarkan Pancasila dan UUD 1945', explanation: 'Menanggapi radikalisme secara cerdas dengan argumentasi yang kuat dan berbasis pada ideologi negara adalah pendekatan yang efektif.' },

    // TKP Tambahan (15 soal untuk mencapai 45)
    { subtest: 'TKP', question: 'Anda memiliki beban kerja yang banyak dan tenggat waktu yang ketat. Teman Anda meminta bantuan untuk menyelesaikan tugasnya. Apa yang Anda lakukan?', options: ['A. Menolak karena tugas Anda sendiri menumpuk', 'B. Membantu sebisanya setelah tugas Anda selesai', 'C. Menjelaskan kondisi Anda dan menawarkan bantuan bila ada waktu luang, atau memberikan saran cara menyelesaikannya', 'D. Mengambil alih tugasnya meskipun Anda sendiri sibuk'], answer: 'C. Menjelaskan kondisi Anda dan menawarkan bantuan bila ada waktu luang, atau memberikan saran cara menyelesaikannya', explanation: 'Sikap yang baik adalah tetap ingin membantu namun juga realistis dengan kapasitas diri. Menawarkan saran atau bantuan di lain waktu menunjukkan empati dan profesionalisme.' },
    { subtest: 'TKP', question: 'Anda menemukan sebuah prosedur kerja yang sudah lama tidak diperbarui dan kurang efektif. Apa yang Anda lakukan?', options: ['A. Mengikuti prosedur lama saja karena sudah terbiasa', 'B. Mengeluh kepada rekan kerja tentang prosedur yang rumit', 'C. Mengusulkan pembaruan prosedur kepada atasan disertai analisis dan solusi perbaikan', 'D. Membiarkan saja karena bukan tanggung jawab Anda untuk mengubah prosedur'], answer: 'C. Mengusulkan pembaruan prosedur kepada atasan disertai analisis dan solusi perbaikan', explanation: 'Seorang profesional harus proaktif dalam mengidentifikasi masalah dan mengusulkan solusi untuk meningkatkan efisiensi dan kualitas kerja.' },
    { subtest: 'TKP', question: 'Ketika ada pekerjaan yang harus diselesaikan bersama tim, namun ada perbedaan pendapat yang tajam, Anda akan...', options: ['A. Memilih untuk diam dan mengikuti mayoritas', 'B. Mempertahankan pendapat Anda tanpa kompromi', 'C. Mencari titik temu dan memfasilitasi diskusi untuk mencapai kesepakatan terbaik', 'D. Menyerahkan keputusan sepenuhnya kepada pemimpin tim'], answer: 'C. Mencari titik temu dan memfasilitasi diskusi untuk mencapai kesepakatan terbaik', explanation: 'Kemampuan berkolaborasi dan mencari konsensus adalah kunci dalam kerja tim, terutama saat ada perbedaan pendapat.' },
    { subtest: 'TKP', question: 'Anda ditunjuk sebagai ketua panitia suatu acara penting. Banyak anggota tim yang belum berpengalaman. Apa langkah Anda?', options: ['A. Mengerjakan sebagian besar tugas sendirian agar cepat selesai', 'B. Memberikan tugas sulit kepada anggota yang paling berpotensi saja', 'C. Membimbing dan mendelegasikan tugas sesuai kemampuan, serta memberikan pelatihan singkat jika diperlukan', 'D. Mengganti anggota tim yang tidak berpengalaman dengan yang lebih ahli'], answer: 'C. Membimbing dan mendelegasikan tugas sesuai kemampuan, serta memberikan pelatihan singkat jika diperlukan', explanation: 'Seorang pemimpin yang baik akan mengembangkan potensi anggotanya, bukan hanya menuntut hasil.' },
    { subtest: 'TKP', question: 'Pimpinan Anda memberikan tugas yang tidak sesuai dengan keahlian Anda, namun Anda merasa itu adalah kesempatan untuk belajar. Apa yang Anda lakukan?', options: ['A. Menolak tugas tersebut dengan alasan tidak kompeten', 'B. Menerima dengan berat hati dan berharap ada yang membantu', 'C. Menerima tugas tersebut, lalu belajar dan mencari informasi relevan untuk menyelesaikannya', 'D. Menerima, namun hanya akan mengerjakannya seadanya'], answer: 'C. Menerima tugas tersebut, lalu belajar dan mencari informasi relevan untuk menyelesaikannya', explanation: 'Sikap proaktif dalam pengembangan diri dan kemauan untuk belajar hal baru adalah ciri profesionalisme yang baik.' },
    { subtest: 'TKP', question: 'Anda menghadapi tekanan kerja yang tinggi dan target yang sulit dicapai. Reaksi Anda adalah...', options: ['A. Merasa putus asa dan tidak termotivasi', 'B. Mencari kambing hitam atas situasi tersebut', 'C. Menganalisis situasi, menyusun strategi, dan bekerja lebih keras untuk mencapai target', 'D. Meminta cuti karena stres yang berlebihan'], answer: 'C. Menganalisis situasi, menyusun strategi, dan bekerja lebih keras untuk mencapai target', explanation: 'Profesionalisme ditunjukkan dengan kemampuan mengelola stres dan tetap berfokus pada penyelesaian tugas meskipun di bawah tekanan.' },
    { subtest: 'TKP', question: 'Dalam sebuah diskusi tim, Anda memiliki ide yang berbeda dengan mayoritas. Apa yang Anda lakukan?', options: ['A. Menyimpan ide Anda dan tidak menyampaikannya', 'B. Memaksakan ide Anda agar diterima', 'C. Menyampaikan ide Anda dengan argumen yang jelas dan siap menerima masukan atau perbedaan pendapat', 'D. Mengkritik ide orang lain tanpa memberikan alternatif'], answer: 'C. Menyampaikan ide Anda dengan argumen yang jelas dan siap menerima masukan atau perbedaan pendapat', explanation: 'Mampu menyampaikan ide secara konstruktif dan terbuka terhadap kritik adalah bagian dari jejaring kerja dan profesionalisme.' },
    { subtest: 'TKP', question: 'Anda mengetahui adanya kebijakan baru di kantor yang tidak populer di kalangan rekan kerja. Apa yang Anda lakukan?', options: ['A. Ikut mengeluh dan menolak kebijakan tersebut', 'B. Mencoba memahami alasan di balik kebijakan dan menjelaskannya kepada rekan lain', 'C. Bersikap netral dan tidak peduli', 'D. Mengajak rekan kerja untuk menentang kebijakan tersebut'], answer: 'B. Mencoba memahami alasan di balik kebijakan dan menjelaskannya kepada rekan lain', explanation: 'Sikap adaptif dan kemampuan komunikasi yang baik sangat penting dalam menghadapi perubahan dan membangun pemahaman di lingkungan kerja.' },
    { subtest: 'TKP', question: 'Ketika berinteraksi dengan masyarakat yang memiliki latar belakang pendidikan rendah, Anda akan...', options: ['A. Menggunakan bahasa yang rumit agar terlihat cerdas', 'B. Berbicara seperlunya dan tidak terlalu dekat', 'C. Menggunakan bahasa yang sederhana, mudah dimengerti, dan bersikap ramah', 'D. Meminta mereka untuk didampingi oleh orang yang berpendidikan tinggi'], answer: 'C. Menggunakan bahasa yang sederhana, mudah dimengerti, dan bersikap ramah', explanation: 'Keterampilan pelayanan publik melibatkan kemampuan berkomunikasi secara efektif dengan berbagai lapisan masyarakat.' },
    { subtest: 'TKP', question: 'Anda mendapatkan tawaran hadiah dari pihak yang berurusan dengan instansi Anda setelah menyelesaikan sebuah proses. Apa yang Anda lakukan?', options: ['A. Menerima dengan senang hati karena itu rezeki', 'B. Menolak dengan sopan dan menjelaskan bahwa itu melanggar kode etik', 'C. Menerima namun tidak melaporkannya', 'D. Menerima dan membaginya dengan rekan kerja'], answer: 'B. Menolak dengan sopan dan menjelaskan bahwa itu melanggar kode etik', explanation: 'Integritas dan anti-gratifikasi adalah nilai penting bagi ASN. Menolak hadiah yang berpotensi gratifikasi adalah tindakan yang benar.' },
    { subtest: 'TKP', question: 'Suatu pekerjaan membutuhkan penggunaan software yang baru Anda pelajari. Anda merasa kurang percaya diri. Apa yang Anda lakukan?', options: ['A. Menunda pekerjaan tersebut sampai Anda benar-benar mahir', 'B. Meminta rekan kerja untuk mengajarkan seluruhnya', 'C. Mencoba mengerjakan sendiri sambil mencari panduan atau tutorial, dan bertanya jika benar-benar buntu', 'D. Berpura-pura sakit agar tidak mengerjakan tugas tersebut'], answer: 'C. Mencoba mengerjakan sendiri sambil mencari panduan atau tutorial, dan bertanya jika benar-benar buntu', explanation: 'Kemauan untuk belajar mandiri dan mencari solusi adalah ciri profesionalisme dan adaptasi TIK.' },
    { subtest: 'TKP', question: 'Anda melihat rekan kerja melakukan tindakan diskriminasi terhadap warga negara yang berbeda suku. Apa yang Anda lakukan?', options: ['A. Mendiamkan saja karena bukan urusan Anda', 'B. Menegur rekan tersebut secara pribadi dan melaporkannya kepada atasan jika perlu', 'C. Ikut-ikutan mendiskriminasi agar tidak dianggap berbeda', 'D. Mengajak rekan lain untuk memboikot rekan yang melakukan diskriminasi tersebut'], answer: 'B. Menegur rekan tersebut secara pribadi dan melaporkannya kepada atasan jika perlu', explanation: 'Sikap anti-diskriminasi dan menjunjung tinggi nilai sosial budaya adalah penting bagi ASN. Proaktif menegur dan melaporkan pelanggaran adalah tindakan yang benar.' },
    { subtest: 'TKP', question: 'Saat terjadi musibah di daerah lain, instansi Anda mengadakan penggalangan dana. Meskipun tidak diwajibkan, Anda akan...', options: ['A. Tidak ikut karena keuangan sedang pas-pasan', 'B. Berpartisipasi sesuai kemampuan sebagai bentuk kepedulian sosial', 'C. Hanya ikut jika ada imbalan atau penghargaan', 'D. Menunggu orang lain yang berpartisipasi terlebih dahulu'], answer: 'B. Berpartisipasi sesuai kemampuan sebagai bentuk kepedulian sosial', explanation: 'Empati dan kepedulian sosial adalah bagian dari karakter pribadi yang diharapkan dari seorang ASN.' },
    { subtest: 'TKP', question: 'Anda harus menyelesaikan tugas dengan cepat, namun tiba-tiba koneksi internet di kantor terganggu. Apa yang Anda lakukan?', options: ['A. Menunggu sampai koneksi pulih sepenuhnya tanpa melakukan apa-apa', 'B. Mengeluh tentang koneksi yang buruk dan menghentikan pekerjaan', 'C. Mencari alternatif seperti menggunakan hotspot pribadi (jika diizinkan) atau beralih ke tugas offline yang memungkinkan', 'D. Pulang lebih awal karena pekerjaan tidak bisa dilanjutkan'], answer: 'C. Mencari alternatif seperti menggunakan hotspot pribadi (jika diizinkan) atau beralih ke tugas offline yang memungkinkan', explanation: 'Fleksibilitas dan kemampuan mencari solusi alternatif saat menghadapi hambatan teknologi adalah sikap yang profesional.' },
    { subtest: 'TKP', question: 'Saat rekan kerja melakukan kesalahan, Anda akan...', options: ['A. Langsung menyalahkan dan membuatnya merasa malu', 'B. Mendiamkannya agar ia sadar sendiri', 'C. Membantu mencari solusi dan memberikan masukan konstruktif untuk perbaikan', 'D. Menceritakan kesalahannya kepada rekan kerja lain'], answer: 'C. Membantu mencari solusi dan memberikan masukan konstruktif untuk perbaikan', explanation: 'Sikap kolaboratif dan membangun jejaring kerja yang positif mencakup memberikan dukungan dan umpan balik yang membangun kepada rekan kerja.' },

    ],

    // --- Data dinamis ini tidak perlu diubah ---
    judulHalaman: document.title,
    url: window.location.href
};

// ===================================================================================
// --- FUNGSI PENGIRIMAN DATA KE GOOGLE SHEET (DIPERBARUI) ---
// ===================================================================================
async function kirimKeGoogleSheet(data) {
    const statusEl = document.getElementById('submission-status');
    statusEl.textContent = 'Mengirim hasil ujian...';
    
    const formData = new FormData();
    // Menambahkan semua data ke dalam objek FormData.
    formData.append('kategori', data.kategori);
    formData.append('url', data.url);
    formData.append('judulHalaman', data.judulHalaman);
    formData.append('Nama', data.Nama);
    formData.append('JumlahSoal', data.JumlahSoal);
    formData.append('JawabanBenar', data.JawabanBenar);
    formData.append('JawabanSalah', data.JawabanSalah);
    formData.append('TidakDijawab', data.TidakDijawab);
    formData.append('Durasi', data.Durasi);
    formData.append('Nilai', data.Nilai);
    formData.append('StatusKelulusan', data.StatusKelulusan);

    try {
        const response = await fetch(EXAM_CONFIG.scriptURL, {
            method: 'POST',
            body: formData
        });
        
        // Membaca respons sebagai JSON untuk mendapatkan pesan sukses/error dari server
        const result = await response.json();
        
        if (result.result === "success") {
            statusEl.innerHTML = `Hasil ujian berhasil disimpan. <b><a href="${EXAM_CONFIG.linkPeringkat}">Cek Peringkat kamu di sini</a></b>`;
            statusEl.style.color = 'green';
        } else {
            // Menampilkan pesan error yang lebih spesifik dari server
            throw new Error(result.message || 'Terjadi kesalahan dari server.');
        }
    } catch (error) {
        console.error('Error saat mengirim ke Google Sheet:', error);
        statusEl.textContent = `Gagal menyimpan hasil. Coba lagi nanti. Error: ${error.message}`;
        statusEl.style.color = 'red';
    }
}

// ===================================================================================
// --- LOGIKA UTAMA UJIAN (DISESUAIKAN, TIDAK PERLU DIUBAH LAGI) ---
// ===================================================================================
document.addEventListener('DOMContentLoaded', () => {
    // Menggunakan bank soal dari EXAM_CONFIG
    const questions = EXAM_CONFIG.bankSoal;
    let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let questionStatus = new Array(questions.length).fill('unanswered');
    let timerInterval;
    let startTime;
    let currentUsername = '';

    const loginContainer = document.getElementById('login-container');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const loginBtn = document.getElementById('login-btn');
    const loginError = document.getElementById('login-error');
    const appHeader = document.querySelector('.header');
    const quizContainer = document.querySelector('.quiz-container');
    const resultPage = document.getElementById('result-page');
    const subtestTitleEl = document.getElementById('subtest-title');
    const questionNumberEl = document.getElementById('question-number');
    const questionTextEl = document.getElementById('question-text');
    const optionsEl = document.getElementById('options');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const doubtfulBtn = document.getElementById('doubtful-btn');
    const finishBtn = document.getElementById('finish-btn');
    const timerEl = document.getElementById('timer');
    const restartBtn = document.getElementById('restart-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const headerInfo = document.getElementById('header-info');
    const confirmationModal = document.getElementById('confirmation-modal');
    const confirmYesBtn = document.getElementById('confirm-yes');
    const confirmNoBtn = document.getElementById('confirm-no');
    
    function showLoginPage() {
        loginContainer.style.display = 'block'; // Diubah dari 'flex' agar sesuai skrip asli
        appHeader.style.display = 'none';
        quizContainer.style.display = 'none';
        resultPage.style.display = 'none';
        passwordInput.value = '';
        loginError.style.display = 'none';
    }

    function handleLogin() {
        const password = passwordInput.value;
        const username = usernameInput.value.trim();
        if (username === "") {
            loginError.textContent = "Username tidak boleh kosong.";
            loginError.style.display = 'block';
            return;
        }
        // Menggunakan password dari EXAM_CONFIG
        if (password === EXAM_CONFIG.password) {
            currentUsername = username;
            loginContainer.style.display = 'none';
            appHeader.style.display = 'flex';
            quizContainer.style.display = 'flex';
            resultPage.style.display = 'none';
            headerInfo.textContent = `Peserta: ${currentUsername}`;
            startQuiz();
        } else {
            loginError.textContent = "Password salah. Coba lagi.";
            loginError.style.display = 'block';
        }
    }
    
    function handleLogout() {
        clearInterval(timerInterval);
        showLoginPage();
    }

    function startQuiz() {
        currentQuestionIndex = 0;
        userAnswers.fill(null);
        questionStatus.fill('unanswered');
        quizContainer.style.display = 'flex';
        resultPage.style.display = 'none';
        setupQuestionGrids();
        displayQuestion(currentQuestionIndex);
        // Menggunakan durasi dari EXAM_CONFIG
        startTimer(EXAM_CONFIG.durasiMenit * 60);
        startTime = new Date();
    }

    function setupQuestionGrids() {
        const gridContainer = document.getElementById('grid-container');
        gridContainer.innerHTML = '';
        const subtests = [...new Set(questions.map(q => q.subtest))];
        subtests.forEach(subtest => {
            const group = document.createElement('div');
            group.className = 'subtest-group';
            const title = document.createElement('h3');
            title.textContent = subtest;
            const grid = document.createElement('div');
            grid.className = 'question-grid';
            group.appendChild(title);
            group.appendChild(grid);
            gridContainer.appendChild(group);
            questions.forEach((q, index) => {
                if (q.subtest === subtest) {
                    const button = document.createElement('button');
                    button.className = 'grid-button';
                    button.textContent = index + 1;
                    button.onclick = () => jumpToQuestion(index);
                    grid.appendChild(button);
                }
            });
        });
    }

    function displayQuestion(index) {
        document.querySelector('.grid-button.current')?.classList.remove('current');
        currentQuestionIndex = index;
        const question = questions[index];
        subtestTitleEl.textContent = question.subtest;
        questionNumberEl.textContent = index + 1;
        questionTextEl.innerHTML = question.question;
        optionsEl.innerHTML = '';
        question.options.forEach(option => {
            const li = document.createElement('li');
            const label = document.createElement('label');
            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = `option-${index}`;
            radio.value = option;
            if (userAnswers[index] === option) {
                radio.checked = true;
                label.classList.add('selected');
            }
            radio.onchange = () => selectAnswer(index, option, label);
            const span = document.createElement('span');
            span.innerHTML = option; // Menggunakan innerHTML untuk render jika ada format
            label.appendChild(radio);
            label.appendChild(span);
            li.appendChild(label);
            optionsEl.appendChild(li);
        });
        updateNavButtons();
        updateGridButtonStatus(index, true);
    }

    function selectAnswer(index, answer, label) {
        userAnswers[index] = answer;
        document.querySelectorAll(`#options li label`).forEach(l => l.classList.remove('selected'));
        label.classList.add('selected');
        if (questionStatus[index] !== 'doubtful') {
            questionStatus[index] = 'answered';
        }
        updateGridButtonStatus(index);
    }
    
    function updateNavButtons() {
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = currentQuestionIndex === questions.length - 1;
    }
    
    function updateGridButtonStatus(index, isCurrent = false) {
        const allGridButtons = document.querySelectorAll('.grid-button');
        if (isCurrent) {
            const currentBtn = document.querySelector('.grid-button.current');
            if (currentBtn) currentBtn.classList.remove('current');
        }
        const button = Array.from(allGridButtons).find(btn => parseInt(btn.textContent) === index + 1);
        if (!button) return;
        if(isCurrent) button.classList.add('current');
        button.classList.remove('answered', 'doubtful');
        switch (questionStatus[index]) {
            case 'answered': button.classList.add('answered'); break;
            case 'doubtful': button.classList.add('doubtful'); break;
        }
    }

    function jumpToQuestion(index) {
        displayQuestion(index);
    }

    function startTimer(duration) {
        let timer = duration;
        clearInterval(timerInterval);
        timerEl.parentElement.classList.remove('low-time');
        timerInterval = setInterval(() => {
            let minutes = parseInt(timer / 60, 10);
            let seconds = parseInt(timer % 60, 10);
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            timerEl.textContent = `${minutes}:${seconds}`;
            if (timer < 300 && !timerEl.parentElement.classList.contains('low-time')) { 
                timerEl.parentElement.classList.add('low-time'); 
            }
            if (--timer < 0) {
                clearInterval(timerInterval);
                finishQuiz();
            }
        }, 1000);
    }
    
    function showConfirmation() {
        confirmationModal.style.display = 'flex';
    }

    function formatDuration(ms) {
    const totalSeconds = Math.floor(ms / 1000);
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    return `${minutes} menit ${seconds.toString().padStart(2, '0')} detik`;
}


    function finishQuiz() {
        clearInterval(timerInterval);
        confirmationModal.style.display = 'none';
        const endTime = new Date();
        const durationMs = endTime - startTime;
        let correctCount = 0;
        questions.forEach((q, index) => {
            if (userAnswers[index] === q.answer) correctCount++;
        });
        const totalQuestions = questions.length;
        const answeredCount = userAnswers.filter(a => a !== null).length;
        const incorrectCount = answeredCount - correctCount;
        const unansweredCount = totalQuestions - answeredCount;
        const finalScore = totalQuestions > 0 ? parseFloat(((correctCount / totalQuestions) * 100).toFixed(2)) : 0;
        const isPassed = finalScore >= EXAM_CONFIG.passingGrade;
        
        quizContainer.style.display = 'none';
        resultPage.style.display = 'block';
        headerInfo.textContent = `Hasil Ujian: ${currentUsername}`;
        
        const statusEl = document.getElementById('status-lulus');
        statusEl.textContent = isPassed ? 'SELAMAT, ANDA LULUS!' : 'MAAF, ANDA BELUM LULUS';
        statusEl.className = `status ${isPassed ? 'lulus' : 'gagal'}`;
        document.getElementById('final-score').textContent = finalScore;
        document.getElementById('score-details').textContent = `${correctCount} dari ${totalQuestions} soal benar`;
        
        const reviewSection = document.getElementById('review-section');
        reviewSection.innerHTML = '';
        questions.forEach((q, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === q.answer;
            reviewSection.innerHTML += `
                <div class="review-item">
                    <p><strong>Soal ${index + 1}:</strong> ${q.question}</p>
                    <div class="review-answer user-answer ${isCorrect ? '' : 'is-incorrect'}">Jawaban Anda: ${userAnswer || 'Tidak Dijawab'}</div>
                    ${!isCorrect ? `<div class="review-answer correct-answer">Jawaban Benar: ${q.answer}</div>` : ''}
                    <div class="explanation"><strong>Pembahasan:</strong> ${q.explanation}</div>
                </div>
            `;
        });
        
        const dataForSheet = {
            kategori: EXAM_CONFIG.kategori,
            url: EXAM_CONFIG.url,
            judulHalaman: EXAM_CONFIG.judulHalaman,
            Nama: currentUsername,
            JumlahSoal: totalQuestions,
            JawabanBenar: correctCount,
            JawabanSalah: incorrectCount,
            TidakDijawab: unansweredCount,
            Durasi: formatDuration(durationMs),
            Nilai: finalScore,
            StatusKelulusan: isPassed ? 'Lulus' : 'Tidak Lulus'
        };
        kirimKeGoogleSheet(dataForSheet);
    }

    // Event Listeners
    loginBtn.addEventListener('click', handleLogin);
    passwordInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleLogin(); });
    logoutBtn.addEventListener('click', handleLogout);
    prevBtn.addEventListener('click', () => { if (currentQuestionIndex > 0) displayQuestion(currentQuestionIndex - 1) });
    nextBtn.addEventListener('click', () => { if (currentQuestionIndex < questions.length - 1) displayQuestion(currentQuestionIndex + 1) });
    doubtfulBtn.addEventListener('click', () => {
        const currentStatus = questionStatus[currentQuestionIndex];
        if (currentStatus === 'doubtful') {
            questionStatus[currentQuestionIndex] = userAnswers[currentQuestionIndex] ? 'answered' : 'unanswered';
        } else {
            questionStatus[currentQuestionIndex] = 'doubtful';
        }
        updateGridButtonStatus(currentQuestionIndex);
    });
    finishBtn.addEventListener('click', showConfirmation);
    confirmYesBtn.addEventListener('click', finishQuiz);
    confirmNoBtn.addEventListener('click', () => confirmationModal.style.display = 'none');
    restartBtn.addEventListener('click', handleLogout);

    showLoginPage();
});
</script>
