
    <!-- SELURUH KONTEN HTML ANDA DARI SINI -->
    <div id="login-container">
        <div class="login-box">
            <h2>Login Peserta Ujian</h2>
            <div class="input-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Masukkan username Anda">
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Masukkan password">
            </div>
            <button id="login-btn">Masuk</button>
            <p id="login-error">Password salah. Coba lagi.</p>
            <a href="/ujian/cara-ikut-tryout-online-gratis" style="text-decoration: none;">
                <button id="cara-btn" type="button">Cara Ikut Try Out</button>
            </a>
        </div>
    </div>

    <header class="header" style="display: none;">
        <h2>Simulasi Ujian</h2>
        <div class="user-info">
            <span id="header-info"></span>
            <button id="logout-btn">Logout</button>
        </div>
    </header>

    <div class="quiz-container" style="display: none;">
        <main class="question-panel">
            <div class="question-header">
                <span id="subtest-title">Subtes</span> | Soal No. <span id="question-number">1</span>
            </div>
            <div class="question-body">
                <p id="question-text">Memuat soal...</p>
                <ul id="options" class="options-list"></ul>
            </div>
            <div class="quiz-actions">
                <button id="prev-btn" class="action-button">Sebelumnya</button>
                <button id="doubtful-btn" class="action-button">Ragu-ragu</button>
                <button id="next-btn" class="action-button">Selanjutnya</button>
            </div>
        </main>
        <aside class="navigation-panel">
            <div class="timer-box">
                Sisa Waktu
                <div id="timer">30:00</div>
            </div>
            <div id="grid-container" class="question-grid-container"></div>
            <div class="quiz-actions" style="justify-content: center;">
                <button id="finish-btn" class="action-button">Selesaikan Ujian</button>
            </div>
        </aside>
    </div>

    <div id="result-page" class="result-container" style="display: none;">
        <div class="result-card overall-summary">
            <div id="status-lulus" class="status"></div>
            <h2>Hasil Akhir Ujian</h2>
            <div id="final-score" class="score">0</div>
            <div id="score-details" class="score-details"></div>
            <div id="submission-status"></div>
        </div>
        <div class="result-card">
            <h3>Tinjauan Jawaban</h3>
            <div id="review-section"></div>
        </div>
        <div style="text-align: center;">
           <button id="restart-btn" class="action-button">Ulangi Ujian</button>
        </div>
    </div>
    
    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Selesaikan Ujian?</h2>
            <p>Apakah Anda yakin ingin menyelesaikan dan mengakhiri sesi ujian ini?</p>
            <div class="modal-actions">
                <button id="confirm-no" class="action-button">Batal</button>
                <button id="confirm-yes" class="action-button">Ya, Selesaikan</button>
            </div>
        </div>
    </div>
    <!-- HINGGA AKHIR KONTEN HTML ANDA -->

<script>
// ===================================================================================
// --- KONFIGURASI UJIAN (HANYA UBAH BAGIAN INI UNTUK UJIAN BARU) ---
// ===================================================================================
const EXAM_CONFIG = {
    // 1. Ganti nama kategori ini sesuai nama sheet di Google Sheets (cth: "TWK", "TKP")
    kategori: "SKDCPNS",
    
    // 2. Ganti URL ini dengan URL Web App dari Google Script Anda yang sudah di-deploy ulang.
    scriptURL: 'https://script.google.com/macros/s/AKfycbxNJ9pOsCPSPAPRQKfoq43AwmVMSIScq6AIa33Q0dxnMI-jb1xuxi1aK3bUBFDstinDiQ/exec',
    
    // 3. Ganti link peringkat ini ke halaman peringkat yang sesuai.
    linkPeringkat: "/ujian/ranking-peserta-tryout/",
    
    // 4. Sesuaikan pengaturan ujian jika perlu.
    durasiMenit: 150,
    passingGrade: 65,
    password: "ujian",
    
    // 5. Ganti seluruh isi bank soal di bawah ini dengan soal yang sesuai.
    bankSoal: [
    // --- TES WAWASAN KEBANGSAAN (TWK) - 30 Soal ---
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Kedudukan Pancasila sebagai sumber dari segala sumber hukum di Indonesia ditegaskan dalam...', options: ['UU No. 12 Tahun 2011', 'Tap MPR No. III/MPR/2000', 'UUD 1945 Pasal 1 ayat 3', 'Pembukaan UUD 1945'], answer: 'UU No. 12 Tahun 2011', explanation: 'UU No. 12 Tahun 2011 tentang Pembentukan Peraturan Perundang-undangan secara eksplisit menempatkan Pancasila sebagai sumber dari segala sumber hukum negara.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Amandemen UUD 1945 tidak dapat dilakukan terhadap bagian...', options: ['Batang Tubuh', 'Pembukaan', 'Penjelasan', 'Aturan Peralihan'], answer: 'Pembukaan', explanation: 'Pembukaan UUD 1945 tidak dapat diubah karena di dalamnya terdapat dasar negara (Pancasila) dan cita-cita luhur bangsa Indonesia. Mengubahnya sama dengan membubarkan negara.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Semangat nasionalisme yang berlebihan dan menganggap bangsa lain lebih rendah disebut...', options: ['Patriotisme', 'Chauvinisme', 'Sukuisme', 'Ekstremisme'], answer: 'Chauvinisme', explanation: 'Chauvinisme adalah bentuk nasionalisme sempit yang meyakini bahwa bangsanya lebih superior dibandingkan bangsa lain.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Pada lambang negara Garuda Pancasila, jumlah bulu pada ekor melambangkan...', options: ['Tanggal proklamasi', 'Bulan proklamasi', 'Tahun proklamasi', 'Jumlah sila Pancasila'], answer: 'Bulan proklamasi', explanation: 'Jumlah bulu pada ekor adalah 8, melambangkan bulan Agustus, bulan proklamasi kemerdekaan Indonesia.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Politik luar negeri Indonesia yang bebas aktif pertama kali dicetuskan oleh...', options: ['Ir. Soekarno', 'Drs. Mohammad Hatta', 'Sutan Sjahrir', 'Adam Malik'], answer: 'Drs. Mohammad Hatta', explanation: 'Konsep politik luar negeri bebas aktif pertama kali disampaikan oleh Mohammad Hatta dalam pidatonya yang berjudul "Mendayung antara Dua Karang" pada tahun 1948.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Gerakan separatis di Indonesia yang bertujuan mendirikan Negara Islam Indonesia (NII) dipimpin oleh...', options: ['Musso', 'Amir Sjarifuddin', 'Kartosoewirjo', 'D.N. Aidit'], answer: 'Kartosoewirjo', explanation: 'Sekarmadji Maridjan Kartosoewirjo adalah pemimpin pemberontakan Darul Islam/Tentara Islam Indonesia (DI/TII) yang memproklamasikan NII.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Perwujudan nilai Pancasila sila kelima dalam bidang ekonomi adalah...', options: ['Sistem ekonomi pasar bebas', 'Penguasaan sumber daya alam oleh swasta asing', 'Pengembangan koperasi sebagai soko guru perekonomian', 'Monopoli oleh BUMN'], answer: 'Pengembangan koperasi sebagai soko guru perekonomian', explanation: 'Koperasi mencerminkan asas kekeluargaan dan gotong royong, yang sejalan dengan nilai keadilan sosial bagi seluruh rakyat Indonesia.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Lagu "Bagimu Negeri" yang merupakan salah satu lagu wajib nasional diciptakan oleh...', options: ['W.R. Supratman', 'Ismail Marzuki', 'Cornel Simanjuntak', 'Kusbini'], answer: 'Kusbini', explanation: 'Lagu "Bagimu Negeri" adalah ciptaan Kusbini, seorang komponis besar Indonesia.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Contoh sikap yang mencerminkan integritas sebagai ASN adalah...', options: ['Datang ke kantor tepat waktu hanya ketika ada atasan', 'Menyelesaikan pekerjaan sesuai target tanpa peduli kualitasnya', 'Tidak menerima suap, gratifikasi, atau pungutan liar dalam bentuk apapun', 'Menggunakan mobil dinas untuk keperluan liburan keluarga'], answer: 'Tidak menerima suap, gratifikasi, atau pungutan liar dalam bentuk apapun', explanation: 'Integritas ASN tercermin dari sikap jujur, bertanggung jawab, dan menolak segala bentuk praktik korupsi.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Konsep "Archipelagic State" atau Negara Kepulauan bagi Indonesia pertama kali diakui secara internasional melalui...', options: ['Deklarasi Djuanda', 'Konferensi Asia Afrika', 'UNCLOS 1982', 'Perjanjian Giyanti'], answer: 'UNCLOS 1982', explanation: 'Konvensi Hukum Laut PBB (UNCLOS) tahun 1982 adalah forum internasional yang secara resmi mengakui konsep Indonesia sebagai negara kepulauan.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Dalam UUD 1945, kekuasaan kehakiman dipegang oleh...', options: ['Mahkamah Agung dan badan peradilan di bawahnya, serta Mahkamah Konstitusi', 'Hanya Mahkamah Agung', 'Presiden dan Menteri Hukum dan HAM', 'Komisi Yudisial'], answer: 'Mahkamah Agung dan badan peradilan di bawahnya, serta Mahkamah Konstitusi', explanation: 'Pasal 24 ayat (2) UUD 1945 menyatakan bahwa kekuasaan kehakiman dilakukan oleh sebuah Mahkamah Agung dan badan peradilan yang berada di bawahnya serta oleh sebuah Mahkamah Konstitusi.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Batas wilayah laut teritorial Indonesia diukur sejauh...', options: ['3 mil dari garis pantai', '12 mil dari garis pangkal kepulauan', '200 mil dari garis pantai', '24 mil dari garis pangkal kepulauan'], answer: '12 mil dari garis pangkal kepulauan', explanation: 'Sesuai dengan UNCLOS 1982, batas laut teritorial sebuah negara kepulauan adalah 12 mil laut dari garis pangkal lurus kepulauan.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Bentuk negara Indonesia adalah kesatuan, bukan serikat. Hal ini mengandung makna...', options: ['Daerah memiliki kedaulatan sendiri', 'Hanya ada satu pemerintahan pusat yang memegang kedaulatan tertinggi', 'Kekuasaan terbagi sama rata antara pusat dan daerah', 'Presiden dapat membubarkan pemerintah daerah'], answer: 'Hanya ada satu pemerintahan pusat yang memegang kedaulatan tertinggi', explanation: 'Dalam negara kesatuan, kedaulatan tidak terbagi. Pemerintah pusat adalah pemegang kekuasaan tertinggi, meskipun ada pendelegasian wewenang ke daerah (otonomi).' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Contoh nyata sikap bela negara bagi seorang pelajar adalah...', options: ['Ikut berperang melawan negara lain', 'Belajar dengan tekun dan berprestasi', 'Menjadi anggota organisasi terlarang', 'Mengabaikan pelajaran Pendidikan Kewarganegaraan'], answer: 'Belajar dengan tekun dan berprestasi', explanation: 'Bela negara tidak selalu berarti angkat senjata. Bagi pelajar, mengisi kemerdekaan dengan belajar tekun untuk membangun bangsa di masa depan adalah wujud bela negara.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Badan Penyelidik Usaha-usaha Persiapan Kemerdekaan Indonesia (BPUPKI) diketuai oleh...', options: ['Ir. Soekarno', 'Mohammad Yamin', 'Dr. K.R.T. Radjiman Wedyodiningrat', 'Soepomo'], answer: 'Dr. K.R.T. Radjiman Wedyodiningrat', explanation: 'BPUPKI atau Dokuritsu Junbi Cosakai diketuai oleh Dr. K.R.T. Radjiman Wedyodiningrat, dengan wakil Ichibangase Yosio (Jepang) dan R.P. Soeroso.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Salah satu alasan mengapa Indonesia perlu menjaga hubungan baik dengan negara lain adalah...', options: ['Karena Indonesia adalah negara yang lemah', 'Untuk memenuhi tujuan nasional yaitu ikut melaksanakan ketertiban dunia', 'Agar mendapat bantuan utang luar negeri', 'Supaya dapat mengintervensi urusan negara lain'], answer: 'Untuk memenuhi tujuan nasional yaitu ikut melaksanakan ketertiban dunia', explanation: 'Menjaga hubungan baik adalah implementasi dari politik luar negeri bebas aktif dan amanat Pembukaan UUD 1945 untuk ikut menjaga perdamaian dunia.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Berikut ini yang bukan merupakan unsur konstitutif terbentuknya sebuah negara adalah...', options: ['Rakyat', 'Wilayah', 'Pemerintah yang berdaulat', 'Pengakuan dari negara lain'], answer: 'Pengakuan dari negara lain', explanation: 'Rakyat, wilayah, dan pemerintah yang berdaulat adalah unsur konstitutif (wajib ada). Pengakuan dari negara lain merupakan unsur deklaratif (bersifat pernyataan).' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Nilai-nilai Pancasila digali dari...', options: ['Budaya dan nilai-nilai luhur bangsa Indonesia sendiri', 'Kitab suci semua agama', 'Budaya barat yang modern', 'Piagam PBB'], answer: 'Budaya dan nilai-nilai luhur bangsa Indonesia sendiri', explanation: 'Soekarno menyatakan bahwa ia bukan pencipta Pancasila, melainkan hanya penggali nilai-nilai yang sudah hidup di tengah masyarakat Indonesia sejak lama.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Upaya pemerintah untuk memberantas korupsi diwujudkan dengan membentuk lembaga...', options: ['Mahkamah Agung', 'Komisi Pemberantasan Korupsi (KPK)', 'Ombudsman', 'Komnas HAM'], answer: 'Komisi Pemberantasan Korupsi (KPK)', explanation: 'KPK adalah lembaga negara yang dibentuk dengan tujuan meningkatkan daya guna dan hasil guna terhadap upaya pemberantasan tindak pidana korupsi.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Identitas nasional yang paling utama dan menjadi pemersatu bangsa Indonesia adalah...', options: ['Bahasa Indonesia', 'Lagu daerah', 'Pakaian adat', 'Rumah adat'], answer: 'Bahasa Indonesia', explanation: 'Bahasa Indonesia berfungsi sebagai alat pemersatu berbagai suku bangsa dengan latar belakang sosial budaya dan bahasa yang berbeda-beda.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Hari Kesaktian Pancasila diperingati setiap tanggal 1 Oktober untuk mengenang...', options: ['Lahirnya Pancasila', 'Kegagalan gerakan G30S/PKI dalam mengganti ideologi Pancasila', 'Disahkannya Pancasila sebagai dasar negara', 'Pidato Soekarno tentang Pancasila'], answer: 'Kegagalan gerakan G30S/PKI dalam mengganti ideologi Pancasila', explanation: 'Hari Kesaktian Pancasila diperingati untuk menegaskan kembali bahwa Pancasila adalah ideologi negara yang tidak dapat digantikan.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Menurut UUD 1945, yang dapat memberhentikan Presiden dan/atau Wakil Presiden dalam masa jabatannya adalah...', options: ['MPR atas usul DPR', 'Mahkamah Agung', 'Dewan Perwakilan Rakyat', 'Mahkamah Konstitusi'], answer: 'MPR atas usul DPR', explanation: 'Proses pemakzulan dimulai dari usulan DPR, putusan Mahkamah Konstitusi, dan keputusan akhir oleh MPR.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Paham kebangsaan atau nasionalisme di Indonesia didasarkan pada...', options: ['Persamaan ras dan keturunan', 'Kesamaan cita-cita untuk hidup bersama sebagai bangsa yang merdeka', 'Keinginan untuk menguasai bangsa lain', 'Persamaan agama mayoritas'], answer: 'Kesamaan cita-cita untuk hidup bersama sebagai bangsa yang merdeka', explanation: 'Nasionalisme Indonesia lahir dari perasaan senasib sepenanggungan sebagai bangsa terjajah dan keinginan bersama untuk merdeka.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Tindakan yang menunjukkan sikap mengutamakan kepentingan bangsa di atas kepentingan pribadi adalah...', options: ['Seorang pengusaha membayar pajak tepat waktu dan sesuai aturan', 'Seorang siswa mencontek saat ujian nasional', 'Seorang pejabat menggunakan anggaran negara untuk perjalanan dinas fiktif', 'Seorang warga membuang sampah di sungai'], answer: 'Seorang pengusaha membayar pajak tepat waktu dan sesuai aturan', explanation: 'Membayar pajak adalah kontribusi nyata bagi pendapatan negara yang digunakan untuk pembangunan dan kepentingan seluruh bangsa.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Lembaga yang bertugas mengawasi penyelenggaraan pelayanan publik adalah...', options: ['KPK', 'Komnas HAM', 'Ombudsman Republik Indonesia', 'Komisi Yudisial'], answer: 'Ombudsman Republik Indonesia', explanation: 'Ombudsman adalah lembaga negara yang mempunyai kewenangan mengawasi penyelenggaraan pelayanan publik yang diselenggarakan oleh penyelenggara negara dan pemerintah.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Garuda Pancasila ditetapkan sebagai lambang negara pada...', options: ['Sidang Konstituante', 'Sidang Kabinet Republik Indonesia Serikat (RIS) pada 11 Februari 1950', 'Kongres Pemuda II', 'Proklamasi Kemerdekaan'], answer: 'Sidang Kabinet Republik Indonesia Serikat (RIS) pada 11 Februari 1950', explanation: 'Lambang negara Garuda Pancasila dirancang oleh Sultan Hamid II dan diresmikan pemakaiannya dalam Sidang Kabinet RIS pada 11 Februari 1950.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Contoh perilaku yang bertentangan dengan semangat Bhinneka Tunggal Ika adalah...', options: ['Mempelajari budaya suku lain', 'Berteman dengan siapa saja tanpa memandang suku dan agama', 'Menganggap budaya sendiri paling baik dan merendahkan budaya lain', 'Menggunakan bahasa Indonesia saat berkomunikasi dengan teman dari daerah lain'], answer: 'Menganggap budaya sendiri paling baik dan merendahkan budaya lain', explanation: 'Sikap ini disebut etnosentrisme dan sangat bertentangan dengan semangat persatuan dalam keragaman.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Grasi dan rehabilitasi adalah hak prerogatif Presiden di bidang yudikatif yang diberikan setelah mendapat pertimbangan dari...', options: ['Mahkamah Agung', 'DPR', 'MPR', 'Mahkamah Konstitusi'], answer: 'Mahkamah Agung', explanation: 'Pasal 14 ayat (1) UUD 1945 menyatakan Presiden memberi grasi dan rehabilitasi dengan memperhatikan pertimbangan Mahkamah Agung.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Fungsi UUD 1945 sebagai alat kontrol adalah...', options: ['Menjadi dasar pembentukan lembaga negara', 'Membatasi kekuasaan negara agar tidak sewenang-wenang', 'Menjadi sumber dari segala sumber hukum', 'Menentukan arah kebijakan negara'], answer: 'Membatasi kekuasaan negara agar tidak sewenang-wenang', explanation: 'Sebagai alat kontrol, UUD 1945 berfungsi untuk menguji apakah peraturan perundang-undangan yang lebih rendah sesuai atau tidak dengan norma UUD 1945, sehingga membatasi kekuasaan.' },
    { subtest: 'Tes Wawasan Kebangsaan (TWK)', question: 'Tujuan utama dari bela negara adalah...', options: ['Mempertahankan kedaulatan negara, keutuhan wilayah, dan keselamatan segenap bangsa', 'Mempersiapkan diri untuk wajib militer', 'Mendapatkan pelatihan fisik dan mental', 'Menunjukkan rasa cinta pada tanah air'], answer: 'Mempertahankan kedaulatan negara, keutuhan wilayah, dan keselamatan segenap bangsa', explanation: 'Bela negara bertujuan untuk menjaga eksistensi NKRI dari segala ancaman, baik militer maupun non-militer, demi kelangsungan hidup bangsa dan negara.' },

    // --- TES INTELEGENSIA UMUM (TIU) - 35 Soal ---
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'KOKI : PISAU = ... : ...', options: ['MONTIR : OBENG', 'GURU : PAPAN TULIS', 'DOKTER : PASIEN', 'SOPIR : JALAN'], answer: 'MONTIR : OBENG', explanation: 'Hubungan analoginya adalah "profesi : alat utama". Seorang KOKI menggunakan PISAU sebagai alat utamanya, sama seperti seorang MONTIR menggunakan OBENG.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sinonim dari kata "EVOKASI" adalah...', options: ['Penilaian', 'Penggugah rasa', 'Perubahan', 'Penyatuan'], answer: 'Penggugah rasa', explanation: 'Evokasi berarti kemampuan untuk membangkitkan atau menggugah emosi/perasaan.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Angka: 9, 10, 8, 11, 7, 12, ...', options: ['6', '13', '8', '14'], answer: '6', explanation: 'Ini adalah pola dua deret yang saling berselang. Deret pertama: 9, 8, 7, ... (dikurangi 1). Deret kedua: 10, 11, 12, ... (ditambah 1). Angka selanjutnya adalah dari deret pertama, yaitu 7 - 1 = 6.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Jika P adalah bilangan yang menyatakan 3/4 dari 32, dan Q adalah bilangan yang menyatakan 40% dari 60, maka...', options: ['P = Q', 'P < Q', 'P > Q', 'Hubungan tidak dapat ditentukan'], answer: 'P = Q', explanation: 'P = (3/4) * 32 = 24. Q = 0.40 * 60 = 24. Jadi, P = Q.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Semua ponsel memiliki fitur kamera. Sebagian ponsel memiliki fitur NFC. Kesimpulan yang benar adalah...', options: ['Sebagian ponsel memiliki fitur kamera dan NFC.', 'Semua ponsel yang memiliki NFC pasti memiliki kamera.', 'Ponsel yang tidak memiliki NFC tidak memiliki kamera.', 'Jawaban A dan B benar.'], answer: 'Jawaban A dan B benar.', explanation: 'Karena semua ponsel punya kamera, maka ponsel yang punya NFC (yang merupakan bagian dari "semua ponsel") pasti punya kamera. Sehingga, sebagian ponsel memiliki kamera dan NFC. Kedua pernyataan A dan B adalah turunan logis yang benar.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Antonim dari kata "EKLEKTIK" adalah...', options: ['Memilih', 'Tidak pilih-pilih', 'Eksklusif', 'Campuran'], answer: 'Tidak pilih-pilih', explanation: 'Eklektik berarti bersifat memilih yang terbaik dari berbagai sumber atau gaya. Lawan katanya adalah tidak memilih atau menerima apa adanya.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Huruf: B, E, H, K, N, ...', options: ['P', 'Q', 'R', 'S'], answer: 'Q', explanation: 'Pola deret adalah loncat 2 huruf (B->c,d->E->f,g->H, dst.). Maka setelah N (o,p) adalah Q.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sebuah persegi panjang memiliki panjang 15 cm dan keliling 50 cm. Berapa luas persegi panjang tersebut?', options: ['150 cm²', '100 cm²', '250 cm²', '200 cm²'], answer: '150 cm²', explanation: 'Keliling = 2(p+l) => 50 = 2(15+l) => 25 = 15+l => l = 10 cm. Luas = p * l = 15 * 10 = 150 cm².' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Jika Ani rajin belajar, maka ia akan lulus ujian. Ani tidak lulus ujian. Kesimpulan:', options: ['Ani tidak rajin belajar', 'Ani rajin belajar', 'Ani rajin belajar tetapi tidak lulus', 'Tidak dapat ditarik kesimpulan'], answer: 'Ani tidak rajin belajar', explanation: 'Ini adalah modus tollens. Jika P maka Q. Bukan Q, maka kesimpulannya adalah Bukan P.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'GELOMBANG : OMBAK = GUNUNG : ...', options: ['LEMBAH', 'BUKIT', 'HUTAN', 'SUNGAI'], answer: 'BUKIT', explanation: 'Analogi ini berdasarkan ukuran. GELOMBANG adalah versi besar dari OMBAK. GUNUNG adalah versi besar dari BUKIT.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Berapakah nilai dari (175 x 175) - (174 x 174)?', options: ['1', '174', '175', '349'], answer: '349', explanation: 'Gunakan rumus selisih kuadrat a² - b² = (a+b)(a-b). Maka, (175+174)(175-174) = (349)(1) = 349.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Angka: 5, 7, 10, 15, 22, ...', options: ['33', '31', '29', '35'], answer: '33', explanation: 'Pola deret adalah penambahan yang meningkat: +2, +3, +5, +7, ... (bilangan prima). Maka angka selanjutnya adalah 22 + 11 = 33.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sinonim dari kata "KULMINASI" adalah...', options: ['Puncak', 'Dasar', 'Proses', 'Awal'], answer: 'Puncak', explanation: 'Kulminasi berarti titik tertinggi atau puncak dari suatu proses atau kejadian.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sebuah kereta api berjalan dengan kecepatan 90 km/jam. Berapa meter jarak yang ditempuh kereta tersebut dalam 1 menit?', options: ['1500 meter', '900 meter', '5400 meter', '150 meter'], answer: '1500 meter', explanation: '90 km/jam = 90.000 meter / 60 menit = 1500 meter/menit.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Semua penyanyi adalah seniman. Sebagian penyanyi adalah bintang film. Kesimpulan:', options: ['Sebagian seniman adalah bintang film', 'Semua bintang film adalah seniman', 'Sebagian bintang film bukan seniman', 'Tidak semua seniman adalah penyanyi'], answer: 'Sebagian seniman adalah bintang film', explanation: 'Karena sebagian penyanyi adalah bintang film, dan semua penyanyi itu adalah seniman, maka dapat disimpulkan sebagian seniman (yaitu mereka yang penyanyi) adalah bintang film.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Antonim dari kata "NOMADEN" adalah...', options: ['Menetap', 'Berkelana', 'Berpindah', 'Pengembara'], answer: 'Menetap', explanation: 'Nomaden berarti hidup berpindah-pindah. Lawan katanya adalah menetap.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Huruf: P, L, I, G, F, ...', options: ['D', 'E', 'C', 'B'], answer: 'D', explanation: 'Pola deret adalah mundur dengan loncatan yang berkurang: P(-4)L(-3)I(-2)G(-1)F. Pola selanjutnya adalah F(-2)D.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Jika x = (1/16) dan y = 16%, maka...', options: ['x > y', 'x < y', 'x = y', 'Hubungan tidak dapat ditentukan'], answer: 'x < y', explanation: 'x = 1/16 = 0.0625. y = 16% = 0.16. Jadi, x < y.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'RAMALAN : ASTROLOGI = PENYAKIT : ...', options: ['GEOLOGI', 'PSIKOLOGI', 'PATOLOGI', 'ANTROPOLOGI'], answer: 'PATOLOGI', explanation: 'ASTROLOGI adalah ilmu (semu) tentang RAMALAN. PATOLOGI adalah ilmu tentang PENYAKIT.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Berapa jumlah semua bilangan prima antara 40 dan 50?', options: ['131', '84', '90', '133'], answer: '131', explanation: 'Bilangan prima antara 40 dan 50 adalah 41, 43, dan 47. Jumlahnya = 41 + 43 + 47 = 131.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Jika beberapa A adalah B, dan semua B adalah C, maka...', options: ['Beberapa A adalah C', 'Semua A adalah C', 'Beberapa A bukan C', 'Tidak ada A yang C'], answer: 'Beberapa A adalah C', explanation: 'Kesimpulan yang pasti dapat ditarik adalah beberapa A (yaitu A yang juga B) pastilah juga C.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sinonim dari "IMPLISIT" adalah...', options: ['Tersirat', 'Tersurat', 'Jelas', 'Langsung'], answer: 'Tersirat', explanation: 'Implisit berarti terkandung di dalamnya meskipun tidak dinyatakan secara jelas atau terang-terangan; tersirat.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sebuah roda berputar sebanyak 12 kali untuk menempuh jarak 30 meter. Berapa kali roda harus berputar untuk menempuh jarak 100 meter?', options: ['36 kali', '40 kali', '44 kali', '48 kali'], answer: '40 kali', explanation: 'Ini adalah perbandingan senilai. (12 putaran / 30 meter) = (x putaran / 100 meter). x = (12 * 100) / 30 = 40 putaran.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Angka: 1, 1, 2, 3, 5, 8, ...', options: ['13', '11', '12', '10'], answer: '13', explanation: 'Ini adalah deret Fibonacci, dimana angka berikutnya adalah jumlah dua angka sebelumnya. 5 + 8 = 13.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'BATA : TANAH LIAT = BETON : ...', options: ['PASIR', 'SEMEN', 'BATU', 'CAMPURAN SEMEN, PASIR, DAN KERIKIL'], answer: 'CAMPURAN SEMEN, PASIR, DAN KERIKIL', explanation: 'BATA dibuat dari TANAH LIAT. BETON dibuat dari CAMPURAN SEMEN, PASIR, DAN KERIKIL.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Antonim dari "PROGRESIF" adalah...', options: ['Maju', 'Modern', 'Regresif', 'Statis'], answer: 'Regresif', explanation: 'Progresif berarti bergerak maju atau menuju perbaikan. Lawan katanya adalah regresif, yang berarti bergerak mundur atau kemunduran.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Mana yang tidak termasuk dalam kelompoknya?', options: ['Biola', 'Gitar', 'Cello', 'Saxophone'], answer: 'Saxophone', explanation: 'Biola, Gitar, dan Cello adalah alat musik dawai (dipetik/digesek). Saxophone adalah alat musik tiup.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Jika semua X adalah Y dan beberapa Y adalah Z, maka...', options: ['Semua X adalah Z', 'Beberapa X adalah Z', 'Tidak ada X yang Z', 'Tidak dapat ditarik kesimpulan'], answer: 'Tidak dapat ditarik kesimpulan', explanation: 'Tidak ada jaminan bahwa bagian Y yang merupakan Z adalah bagian Y yang juga merupakan X. Kesimpulan tidak bisa ditarik secara pasti.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Seri Angka: 81, 27, 9, 3, ...', options: ['1', '1/3', '0', '-3'], answer: '1', explanation: 'Pola deret adalah dibagi 3. Maka angka selanjutnya adalah 3 / 3 = 1.' },
    { subtest: 'Tes Intelegensia Umum (TIU)', question: 'Sebuah drum berisi air 1/3 bagian. Apabila ditambahkan air sebanyak 3 liter, maka drum tersebut terisi 1/2 bagian. Berapa kapasitas drum tersebut?', options: ['18 liter', '24 liter', '15 liter', '20 liter'], answer: '18 liter', explanation: 'Perubahan volume = 1/2 - 1/3 = 1/6 bagian. 1/6 bagian = 3 liter. Maka kapasitas total drum (1 bagian) = 6 * 3 liter = 18 liter.' },

    // --- TES KARAKTERISTIK PRIBADI (TKP) - 45 Soal ---
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saat bekerja, Anda menerima telepon dari rumah yang mengabarkan anggota keluarga Anda sakit. Padahal pekerjaan Anda sedang banyak dan harus segera diselesaikan. Tindakan Anda...', options: ['Langsung pulang dan meninggalkan pekerjaan begitu saja.', 'Menyelesaikan pekerjaan secepat mungkin dengan tergesa-gesa lalu pulang.', 'Melaporkan situasi kepada atasan, meminta izin, dan mendelegasikan tugas yang paling mendesak kepada rekan jika memungkinkan.', 'Tetap bekerja seperti biasa karena profesionalisme adalah yang utama.', 'Menelpon anggota keluarga lain untuk mengurusnya terlebih dahulu.'], answer: 'Melaporkan situasi kepada atasan, meminta izin, dan mendelegasikan tugas yang paling mendesak kepada rekan jika memungkinkan.', explanation: 'Pilihan ini menunjukkan keseimbangan antara tanggung jawab pekerjaan dan urusan keluarga. Anda bertindak profesional dengan melapor dan memastikan pekerjaan tetap tertangani, sekaligus bertanggung jawab pada keluarga. Skor tertinggi (5).' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Anda melihat rekan kerja Anda melakukan kesalahan yang dapat merugikan instansi. Apa yang akan Anda lakukan?', options: ['Mendiamkannya karena tidak mau ikut campur urusan orang lain.', 'Melaporkannya langsung kepada atasan agar ia mendapat sanksi.', 'Menegurnya dengan keras di depan rekan-rekan lain agar menjadi pelajaran.', 'Mengajaknya bicara secara empat mata, menunjukkan kesalahannya, dan menyarankan untuk segera memperbaikinya.', 'Menunggu hingga kesalahan itu menimbulkan masalah besar, baru ikut membantu.'], answer: 'Mengajaknya bicara secara empat mata, menunjukkan kesalahannya, dan menyarankan untuk segera memperbaikinya.', explanation: 'Ini adalah tindakan yang paling konstruktif dan empatik. Anda menunjukkan kepedulian terhadap instansi dan rekan kerja, dengan tujuan perbaikan, bukan penghakiman. Skor tertinggi (5).' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Instansi Anda mengadakan program pelatihan inovasi digital, namun program ini tidak diwajibkan. Sikap Anda:', options: ['Tidak ikut karena tidak diwajibkan dan hanya akan menambah beban kerja.', 'Hanya ikut jika teman-teman dekat saya juga ikut.', 'Akan mengikutinya dengan antusias karena ini adalah kesempatan untuk mengembangkan kompetensi diri.', 'Akan mempertimbangkannya jika ada insentif tambahan.', 'Membiarkan pegawai yang lebih muda saja yang ikut karena mereka lebih akrab dengan teknologi.'], answer: 'Akan mengikutinya dengan antusias karena ini adalah kesempatan untuk mengembangkan kompetensi diri.', explanation: 'Jawaban ini menunjukkan kemauan belajar yang tinggi, inisiatif, dan orientasi pada pengembangan diri yang berkelanjutan, yang merupakan ciri ASN profesional. Skor tertinggi (5).' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Dalam sebuah diskusi tim, pendapat Anda ditolak oleh mayoritas anggota tim. Reaksi Anda adalah...', options: ['Merasa kecewa dan tidak mau lagi berkontribusi dalam diskusi.', 'Menerima keputusan mayoritas dengan lapang dada dan tetap mendukung keputusan tim.', 'Berusaha sekuat tenaga untuk meyakinkan mereka bahwa pendapat saya yang paling benar.', 'Protes kepada ketua tim karena merasa pendapat saya tidak dihargai.', 'Bekerja sesuai keputusan tim namun dengan setengah hati.'], answer: 'Menerima keputusan mayoritas dengan lapang dada dan tetap mendukung keputusan tim.', explanation: 'Sikap ini menunjukkan kedewasaan, kemampuan bekerja sama dalam tim, dan menghargai proses demokrasi dalam pengambilan keputusan kelompok. Skor tertinggi (5).' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Anda menemukan sebuah dompet berisi uang dan kartu identitas di toilet kantor. Yang Anda lakukan adalah...', options: ['Mengambil uangnya dan membuang dompetnya.', 'Menyimpannya dan menunggu jika ada yang mencari.', 'Mengumumkannya melalui pengeras suara kantor.', 'Segera mencari informasi kontak pemiliknya atau menyerahkannya kepada bagian keamanan/resepsionis untuk ditindaklanjuti.', 'Mengabaikannya, karena bukan milik saya.'], answer: 'Segera mencari informasi kontak pemiliknya atau menyerahkannya kepada bagian keamanan/resepsionis untuk ditindaklanjuti.', explanation: 'Ini adalah cerminan integritas yang paling tinggi. Anda tidak hanya jujur tetapi juga proaktif dalam memastikan barang tersebut kembali kepada pemiliknya melalui prosedur yang benar. Skor tertinggi (5).' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Seorang warga mengeluhkan pelayanan yang ia terima dari rekan kerja Anda. Sikap Anda adalah:', options: ['Menyalahkan rekan kerja saya di depan warga tersebut.', 'Meminta maaf atas nama instansi, menenangkan warga, dan menawarkan untuk membantu menyelesaikan masalahnya.', 'Menyuruh warga tersebut untuk melaporkannya langsung ke atasan.', 'Tidak peduli karena itu bukan urusan saya.', 'Membela rekan kerja saya apapun yang terjadi.'], answer: 'Meminta maaf atas nama instansi, menenangkan warga, dan menawarkan untuk membantu menyelesaikan masalahnya.', explanation: 'Ini menunjukkan orientasi pelayanan yang prima. Anda mengambil tanggung jawab kolektif, menunjukkan empati, dan berorientasi pada solusi untuk menjaga nama baik instansi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya ditugaskan untuk memimpin proyek dengan tim yang anggotanya lebih senior dari saya. Langkah yang saya ambil:', options: ['Merasa sungkan dan membiarkan anggota senior yang mengambil keputusan.', 'Menunjukkan sikap otoriter agar disegani.', 'Mengedepankan komunikasi yang baik, menghargai masukan dari para senior, namun tetap tegas dalam mengambil keputusan akhir sebagai pemimpin.', 'Meminta atasan untuk mengganti anggota tim.', 'Menyerahkan kepemimpinan kepada anggota yang paling senior.'], answer: 'Mengedepankan komunikasi yang baik, menghargai masukan dari para senior, namun tetap tegas dalam mengambil keputusan akhir sebagai pemimpin.', explanation: 'Ini menunjukkan kemampuan kepemimpinan yang matang, mampu berkolaborasi, menghargai orang lain (jejaring kerja), namun tetap memegang tanggung jawab. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika ada kebijakan baru yang saya anggap kurang tepat, namun harus dilaksanakan, saya akan:', options: ['Melaksanakannya sambil terus menggerutu dan mengeluh.', 'Mencari cara untuk tidak melaksanakannya.', 'Melaksanakannya dengan penuh tanggung jawab, sambil mencatat masukan konstruktif untuk disampaikan pada forum evaluasi yang tepat.', 'Menyatakan ketidaksetujuan saya secara terbuka di media sosial.', 'Mempengaruhi rekan lain untuk menolak kebijakan tersebut.'], answer: 'Melaksanakannya dengan penuh tanggung jawab, sambil mencatat masukan konstruktif untuk disampaikan pada forum evaluasi yang tepat.', explanation: 'Ini menunjukkan profesionalisme, loyalitas, sekaligus sikap kritis yang konstruktif. Anda mematuhi hierarki sambil tetap mempersiapkan bahan untuk perbaikan. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya lebih suka bekerja di lingkungan yang...', options: ['Penuh persaingan ketat.', 'Santai dan tidak ada target.', 'Kolaboratif, di mana setiap orang saling mendukung untuk mencapai tujuan bersama.', 'Individualistis, setiap orang fokus pada tugasnya masing-masing.', 'Sangat terstruktur dan kaku.'], answer: 'Kolaboratif, di mana setiap orang saling mendukung untuk mencapai tujuan bersama.', explanation: 'Pilihan ini mencerminkan orientasi yang kuat pada kerja sama tim dan kemampuan membangun jejaring kerja yang positif. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Atasan saya memberikan tugas tambahan di luar deskripsi pekerjaan saya. Reaksi saya:', options: ['Menolaknya karena itu bukan tugas saya.', 'Menerimanya sebagai kesempatan untuk belajar dan menunjukkan kemampuan, selama tidak mengganggu tugas utama.', 'Menerimanya dengan terpaksa.', 'Meminta imbalan tambahan untuk mengerjakannya.', 'Mengeluhkannya kepada rekan kerja lain.'], answer: 'Menerimanya sebagai kesempatan untuk belajar dan menunjukkan kemampuan, selama tidak mengganggu tugas utama.', explanation: 'Ini menunjukkan semangat berprestasi, fleksibilitas, dan kemauan untuk berkembang. Anda melihatnya sebagai peluang, bukan beban. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Sikap saya terhadap teknologi adalah...', options: ['Merasa terintimidasi dan enggan menggunakannya.', 'Hanya menggunakan teknologi yang sudah saya kuasai saja.', 'Selalu antusias untuk mempelajari dan memanfaatkan teknologi terbaru untuk menunjang pekerjaan.', 'Menganggap teknologi hanya merepotkan.', 'Biasa saja, tidak terlalu peduli.'], answer: 'Selalu antusias untuk mempelajari dan memanfaatkan teknologi terbaru untuk menunjang pekerjaan.', explanation: 'Ini menunjukkan tingkat adaptasi teknologi yang tinggi dan keinginan untuk terus melakukan perbaikan (continuous improvement). Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika saya memiliki waktu luang di kantor, saya akan...', options: ['Menggunakannya untuk bersantai dan mengobrol.', 'Pulang lebih awal secara diam-diam.', 'Membaca berita atau membuka media sosial.', 'Mereview kembali pekerjaan yang sudah selesai atau proaktif bertanya apakah ada pekerjaan lain yang bisa dibantu.', 'Mengganggu teman yang sedang bekerja.'], answer: 'Mereview kembali pekerjaan yang sudah selesai atau proaktif bertanya apakah ada pekerjaan lain yang bisa dibantu.', explanation: 'Ini menunjukkan inisiatif, profesionalisme, dan orientasi pada hasil yang tinggi. Anda memanfaatkan waktu secara produktif. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Seorang rekan dari divisi lain meminta data yang Anda miliki untuk pekerjaannya. Prosesnya cukup rumit. Anda akan:', options: ['Menolaknya dengan alasan sibuk.', 'Memberikan data tersebut dengan syarat ia membantu pekerjaan Anda kelak.', 'Memberikan data seadanya tanpa penjelasan.', 'Menjelaskan dengan sabar cara mendapatkan data tersebut atau membantunya jika memungkinkan, demi kelancaran kerja instansi.', 'Menyuruhnya meminta langsung kepada atasan.'], answer: 'Menjelaskan dengan sabar cara mendapatkan data tersebut atau membantunya jika memungkinkan, demi kelancaran kerja instansi.', explanation: 'Jawaban ini menunjukkan kemampuan berkolaborasi dan kesadaran bahwa semua bagian dari instansi adalah satu kesatuan tim yang harus saling mendukung. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Bagaimana Anda menghadapi kritik?', options: ['Menganggapnya sebagai serangan pribadi.', 'Menerimanya dengan lapang dada dan menjadikannya sebagai bahan perbaikan diri.', 'Mendengarkan tetapi tidak melakukannya.', 'Berusaha mencari pembenaran atas tindakan saya.', 'Membalas kritik dengan kritik.'], answer: 'Menerimanya dengan lapang dada dan menjadikannya sebagai bahan perbaikan diri.', explanation: 'Sikap terbuka terhadap kritik menunjukkan kematangan, kemauan belajar, dan kemampuan mengelola diri. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Anda dihadapkan pada dua pilihan pekerjaan mendesak: satu pekerjaan yang Anda sukai, dan satu lagi yang tidak Anda sukai. Keduanya memiliki tenggat waktu yang sama. Anda akan:', options: ['Mengerjakan yang disukai dulu dengan sempurna, sisanya nanti saja.', 'Mendahulukan yang tidak disukai agar beban terasa lebih ringan.', 'Mengerjakan keduanya secara bersamaan sedikit-sedikit.', 'Menganalisis mana yang memiliki dampak dan urgensi lebih tinggi bagi instansi, dan mengerjakannya terlebih dahulu.', 'Meminta rekan lain untuk mengerjakan yang tidak Anda sukai.'], answer: 'Menganalisis mana yang memiliki dampak dan urgensi lebih tinggi bagi instansi, dan mengerjakannya terlebih dahulu.', explanation: 'Ini menunjukkan profesionalisme tingkat tinggi, di mana keputusan didasarkan pada prioritas organisasi, bukan preferensi pribadi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Sikap saya terhadap hoaks dan ujaran kebencian di media sosial adalah...', options: ['Ikut menyebarkannya jika sesuai dengan pandangan saya.', 'Mendiamkannya saja.', 'Tidak ikut menyebar, tidak berkomentar negatif, dan jika perlu melaporkannya ke platform terkait.', 'Menasihati penyebarnya di kolom komentar dengan kata-kata kasar.', 'Mendebat semua orang yang terlibat.'], answer: 'Tidak ikut menyebar, tidak berkomentar negatif, dan jika perlu melaporkannya ke platform terkait.', explanation: 'Ini adalah sikap yang paling bijaksana dan mencerminkan kesadaran akan tanggung jawab sosial dan peran sebagai perekat bangsa. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Pekerjaan saya menuntut kreativitas tinggi, namun akhir-akhir ini saya merasa buntu. Yang saya lakukan:', options: ['Memaksa diri untuk terus bekerja meskipun hasilnya tidak maksimal.', 'Beristirahat sejenak, mencari inspirasi baru dari berbagai sumber, atau berdiskusi dengan rekan kerja.', 'Menyerah dan mengatakan saya tidak mampu lagi.', 'Menyalin ide dari orang lain.', 'Mengambil cuti panjang.'], answer: 'Beristirahat sejenak, mencari inspirasi baru dari berbagai sumber, atau berdiskusi dengan rekan kerja.', explanation: 'Ini adalah cara yang sehat dan produktif untuk mengatasi kebuntuan kreatif. Menunjukkan kemampuan mengelola diri dan inisiatif mencari solusi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Seorang tamu VVIP akan datang ke kantor, dan Anda ditugaskan untuk menyambutnya. Anda akan:', options: ['Mempersiapkan segala sesuatunya dengan detail dan sempurna untuk menjaga nama baik instansi.', 'Mempersiapkannya seadanya saja.', 'Merasa terbebani dan stres.', 'Mendelegasikan tugas tersebut sepenuhnya kepada bawahan.', 'Menjalankan tugas seperti biasa tanpa persiapan khusus.'], answer: 'Mempersiapkan segala sesuatunya dengan detail dan sempurna untuk menjaga nama baik instansi.', explanation: 'Ini menunjukkan profesionalisme, orientasi pada kualitas, dan kesadaran akan pentingnya menjaga citra institusi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Anda melihat ada pemborosan anggaran pada pos kegiatan yang tidak terlalu penting. Sikap Anda:', options: ['Mendiamkannya karena itu bukan wewenang saya.', 'Ikut menikmati pemborosan tersebut.', 'Mengusulkan realokasi anggaran tersebut untuk kegiatan yang lebih produktif melalui jalur yang benar.', 'Membicarakannya di belakang dengan rekan-rekan.', 'Melaporkannya ke media massa.'], answer: 'Mengusulkan realokasi anggaran tersebut untuk kegiatan yang lebih produktif melalui jalur yang benar.', explanation: 'Ini menunjukkan integritas, kepedulian, dan sikap kritis yang konstruktif. Anda proaktif memberikan solusi untuk efisiensi instansi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Dalam bekerja, saya paling anti terhadap...', options: ['Kritik dari atasan.', 'Beban kerja yang banyak.', 'Ketidakjujuran dan pelanggaran aturan.', 'Perubahan yang mendadak.', 'Rekan kerja yang lambat.'], answer: 'Ketidakjujuran dan pelanggaran aturan.', explanation: 'Menempatkan kejujuran dan aturan sebagai hal yang paling prinsipil menunjukkan tingkat integritas yang sangat tinggi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Rekan kerja Anda sering pulang lebih awal dari jadwal yang ditentukan. Anda akan:', options: ['Mengikutinya karena banyak yang melakukannya.', 'Menegurnya karena perilakunya dapat mempengaruhi kinerja tim.', 'Melaporkannya kepada atasan.', 'Fokus pada pekerjaan sendiri dan tetap pulang sesuai jadwal sebagai contoh yang baik.', 'Menasihatinya secara personal jika Anda memiliki hubungan yang cukup dekat.'], answer: 'Fokus pada pekerjaan sendiri dan tetap pulang sesuai jadwal sebagai contoh yang baik.', explanation: 'Menjadi teladan adalah cara yang elegan untuk menunjukkan integritas tanpa menimbulkan konflik langsung. Ini pilihan yang paling aman dan profesional. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika ada masalah, saya cenderung...', options: ['Menyalahkan orang lain.', 'Panik dan cemas.', 'Tetap tenang dan fokus mencari akar masalah serta solusinya.', 'Menghindar dari masalah.', 'Menunggu instruksi dari atasan.'], answer: 'Tetap tenang dan fokus mencari akar masalah serta solusinya.', explanation: 'Ini menunjukkan kemampuan mengelola diri, ketenangan, dan orientasi pada pemecahan masalah (problem solving). Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Anda diminta untuk mempelajari sebuah regulasi baru yang sangat tebal dan rumit dalam waktu singkat. Anda akan:', options: ['Merasa tidak mungkin dan menyerah.', 'Membacanya sekilas saja.', 'Membuat ringkasan atau peta konsep, dan menandai bagian-bagian terpenting untuk dipelajari terlebih dahulu.', 'Meminta orang lain untuk merangkumkannya untuk Anda.', 'Hanya membaca bagian kesimpulan.'], answer: 'Membuat ringkasan atau peta konsep, dan menandai bagian-bagian terpenting untuk dipelajari terlebih dahulu.', explanation: 'Ini menunjukkan kemampuan belajar yang efektif dan strategis. Anda tidak hanya pasrah, tetapi aktif mencari cara terbaik untuk menguasai materi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Seorang warga yang Anda layani tampak tidak puas dan memberikan rating buruk secara online. Tindakan Anda:', options: ['Mencari warga tersebut dan memarahinya.', 'Mengabaikannya karena tidak semua orang bisa dipuaskan.', 'Menjadikannya sebagai bahan evaluasi untuk memperbaiki kualitas pelayanan di kemudian hari.', 'Meminta teman-teman untuk memberikan rating bagus untuk menyeimbangkannya.', 'Merasa sedih dan putus asa.'], answer: 'Menjadikannya sebagai bahan evaluasi untuk memperbaiki kualitas pelayanan di kemudian hari.', explanation: 'Ini menunjukkan orientasi pada pelayanan yang tinggi dan kemauan untuk belajar dari umpan balik negatif demi perbaikan. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Menurut saya, pemimpin yang baik adalah yang...', options: ['Selalu memberikan perintah yang jelas.', 'Mampu memberikan inspirasi dan motivasi kepada timnya.', 'Disegani dan ditakuti oleh bawahannya.', 'Selalu memanjakan bawahannya.', 'Bekerja paling keras di antara yang lain.'], answer: 'Mampu memberikan inspirasi dan motivasi kepada timnya.', explanation: 'Kepemimpinan modern lebih dari sekadar memberi perintah, tetapi juga memberdayakan dan menginspirasi tim untuk mencapai tujuan bersama. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika diberi kepercayaan untuk mengelola anggaran kegiatan, saya akan:', options: ['Menggunakannya sehemat mungkin dan mengembalikan sisa terbanyak.', 'Menggunakannya secara maksimal sesuai rencana dan membuat laporan pertanggungjawaban yang transparan.', 'Mencari celah untuk mendapatkan keuntungan pribadi.', 'Menyerahkan pengelolaannya kepada orang lain.', 'Merasa terbebani oleh tanggung jawab tersebut.'], answer: 'Menggunakannya secara maksimal sesuai rencana dan membuat laporan pertanggungjawaban yang transparan.', explanation: 'Ini menunjukkan integritas, akuntabilitas, dan profesionalisme dalam mengelola amanah yang diberikan. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya merasa rekan kerja saya lebih diperhatikan oleh atasan. Sikap saya:', options: ['Bekerja lebih giat dan menunjukkan kinerja terbaik untuk membuktikan kualitas diri.', 'Merasa iri dan mencoba mencari kesalahan rekan kerja tersebut.', 'Menjilat atasan agar mendapat perhatian yang sama.', 'Bekerja biasa saja, tidak peduli dengan penilaian atasan.', 'Mengeluh kepada rekan-rekan lain.'], answer: 'Bekerja lebih giat dan menunjukkan kinerja terbaik untuk membuktikan kualitas diri.', explanation: 'Ini adalah respons yang paling positif dan berorientasi pada prestasi. Anda mengubah situasi menjadi motivasi untuk berkembang. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya harus bekerja sama dengan orang yang sangat berbeda pandangan politiknya dengan saya. Saya akan:', options: ['Menolak bekerja sama dengannya.', 'Mencoba mempengaruhinya agar mengikuti pandangan saya.', 'Tetap menjaga hubungan profesional, fokus pada tujuan pekerjaan, dan tidak membahas perbedaan pandangan.', 'Selalu berdebat dengannya setiap saat.', 'Menghindarinya sebisa mungkin.'], answer: 'Tetap menjaga hubungan profesional, fokus pada tujuan pekerjaan, dan tidak membahas perbedaan pandangan.', explanation: 'Ini menunjukkan kedewasaan dan kemampuan bekerja sama. Profesionalisme berarti mampu bekerja dengan siapa saja untuk mencapai tujuan organisasi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Hal yang pertama saya lakukan setelah berhasil menyelesaikan sebuah pekerjaan yang sulit adalah...', options: ['Langsung berpuas diri dan bersantai.', 'Mengevaluasi proses kerja untuk mencari hal yang bisa ditingkatkan di masa depan.', 'Menceritakannya kepada semua orang.', 'Meminta hadiah kepada atasan.', 'Segera melupakannya.'], answer: 'Mengevaluasi proses kerja untuk mencari hal yang bisa ditingkatkan di masa depan.', explanation: 'Ini adalah ciri orang yang memiliki semangat belajar dan orientasi pada perbaikan berkelanjutan (kaizen). Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saat terjadi kegagalan komunikasi dalam tim, yang paling bertanggung jawab adalah:', options: ['Pemimpin tim.', 'Pengirim pesan.', 'Penerima pesan.', 'Semua anggota tim memiliki tanggung jawab untuk memastikan komunikasi berjalan efektif.', 'Situasi dan kondisi.'], answer: 'Semua anggota tim memiliki tanggung jawab untuk memastikan komunikasi berjalan efektif.', explanation: 'Komunikasi adalah proses dua arah. Semua anggota tim, baik sebagai pengirim maupun penerima pesan, bertanggung jawab untuk menciptakan pemahaman bersama. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Seorang teman dekat meminta saya untuk memberikan bocoran soal ujian CPNS. Saya akan:', options: ['Memberikannya karena dia teman baik.', 'Menolaknya dengan tegas dan menjelaskan bahwa hal tersebut melanggar hukum dan integritas.', 'Memberikannya dengan syarat ia membayar sejumlah uang.', 'Berpura-pura tidak punya bocoran soal.', 'Menyuruhnya mencari dari sumber lain.'], answer: 'Menolaknya dengan tegas dan menjelaskan bahwa hal tersebut melanggar hukum dan integritas.', explanation: 'Ini adalah satu-satunya jawaban yang benar dan menunjukkan integritas yang tidak bisa ditawar. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika bekerja dari rumah (WFH), tantangan terbesar bagi saya adalah:', options: ['Banyaknya gangguan dari keluarga.', 'Kesulitan untuk tetap disiplin dan fokus pada pekerjaan.', 'Koneksi internet yang tidak stabil.', 'Rindu suasana kantor.', 'Semua jawaban benar.'], answer: 'Kesulitan untuk tetap disiplin dan fokus pada pekerjaan.', explanation: 'Mengakui kesulitan dalam disiplin menunjukkan kesadaran diri. Pilihan lain lebih menyalahkan faktor eksternal. Kemampuan mengelola diri adalah kunci sukses WFH. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Definisi "sukses" dalam bekerja bagi saya adalah...', options: ['Memiliki jabatan yang tinggi.', 'Memiliki gaji yang besar.', 'Mampu memberikan kontribusi nyata dan bermanfaat bagi masyarakat dan instansi.', 'Dikenal oleh banyak orang.', 'Tidak pernah membuat kesalahan.'], answer: 'Mampu memberikan kontribusi nyata dan bermanfaat bagi masyarakat dan instansi.', explanation: 'Ini menunjukkan orientasi pada pelayanan dan motivasi instrinsik yang kuat, yang sejalan dengan nilai-nilai seorang ASN. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Jika saya harus memilih, saya lebih suka...', options: ['Bekerja di belakang layar tanpa banyak interaksi.', 'Bekerja di lapangan dan bertemu banyak orang.', 'Bekerja dalam tim yang solid dan kolaboratif.', 'Bekerja sendiri dengan target yang jelas.', 'Fleksibel, tergantung pada jenis pekerjaannya.'], answer: 'Fleksibel, tergantung pada jenis pekerjaannya.', explanation: 'Ini menunjukkan kemampuan beradaptasi yang tinggi. Anda mampu menyesuaikan gaya kerja dengan tuntutan tugas yang berbeda-beda. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya melihat rekan kerja yang lebih muda kesulitan menggunakan peralatan kantor yang sudah tua. Saya akan:', options: ['Mengejeknya karena tidak bisa menggunakan alat sederhana.', 'Membiarkannya, biar dia belajar sendiri.', 'Menawarkan bantuan dan menunjukkan cara menggunakannya dengan sabar.', 'Melaporkan kepada atasan bahwa peralatannya sudah usang.', 'Menyuruhnya mencari tutorial di internet.'], answer: 'Menawarkan bantuan dan menunjukkan cara menggunakannya dengan sabar.', explanation: 'Ini menunjukkan kepedulian, empati, dan kemampuan bekerja sama. Anda proaktif membantu rekan tanpa memandang usia. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika ada perselisihan antara dua rekan kerja, saya akan:', options: ['Memihak salah satu yang paling dekat dengan saya.', 'Menjadi kompor agar perselisihan semakin panas.', 'Berusaha menjadi penengah yang netral dan membantu mereka menemukan solusi.', 'Tidak mau ikut campur sama sekali.', 'Melaporkan keduanya kepada atasan.'], answer: 'Berusaha menjadi penengah yang netral dan membantu mereka menemukan solusi.', explanation: 'Ini menunjukkan kemampuan mengelola sosial-emosional dan membangun jejaring kerja yang positif. Anda berperan sebagai pemecah masalah. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Sikap saya terhadap aturan yang ada di kantor adalah...', options: ['Selalu mematuhinya tanpa kecuali sebagai bentuk disiplin dan integritas.', 'Mematuhinya hanya jika ada yang mengawasi.', 'Mencari celah untuk bisa melanggarnya.', 'Aturan dibuat untuk dilanggar.', 'Menganggap aturan merepotkan.'], answer: 'Selalu mematuhinya tanpa kecuali sebagai bentuk disiplin dan integritas.', explanation: 'Ini adalah cerminan profesionalisme dan integritas yang paling dasar dan penting bagi seorang ASN. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika atasan meminta masukan untuk sebuah program baru, saya akan:', options: ['Diam saja karena tidak mau ambil risiko jika ide saya salah.', 'Memberikan masukan yang orisinal dan konstruktif berdasarkan analisis saya.', 'Hanya setuju dengan ide atasan agar aman.', 'Mengkritik semua ide yang muncul.', 'Menunggu teman lain memberikan masukan terlebih dahulu.'], answer: 'Memberikan masukan yang orisinal dan konstruktif berdasarkan analisis saya.', explanation: 'Ini menunjukkan inisiatif, kreativitas, dan keberanian untuk berkontribusi secara positif bagi kemajuan instansi. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya lebih suka dihargai karena...', options: ['Penampilan saya.', 'Status sosial saya.', 'Hasil kerja dan kontribusi saya.', 'Hubungan baik saya dengan atasan.', 'Keberuntungan saya.'], answer: 'Hasil kerja dan kontribusi saya.', explanation: 'Jawaban ini menunjukkan orientasi pada prestasi yang kuat. Anda ingin dinilai berdasarkan kinerja dan apa yang telah Anda berikan. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Jika saya tidak sengaja mendengar rahasia pribadi rekan kerja, saya akan:', options: ['Menyebarkannya ke seluruh kantor.', 'Menggunakannya untuk menjatuhkannya suatu saat nanti.', 'Menyimpannya rapat-rapat dan bersikap seolah tidak pernah mendengarnya.', 'Mengkonfirmasinya langsung kepada yang bersangkutan.', 'Memberitahu teman terdekat saya saja.'], answer: 'Menyimpannya rapat-rapat dan bersikap seolah tidak pernah mendengarnya.', explanation: 'Ini menunjukkan integritas dan kemampuan menjaga amanah. Menghormati privasi orang lain adalah bagian dari etika profesional. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Saya akan merasa bangga menjadi seorang ASN jika...', options: ['Saya bisa mendapatkan banyak fasilitas negara.', 'Saya bisa membantu mewujudkan program pemerintah dan melayani masyarakat dengan baik.', 'Saya memiliki kekuasaan.', 'Pekerjaan saya santai dan gajinya besar.', 'Saya bisa pulang kerja tepat waktu setiap hari.'], answer: 'Saya bisa membantu mewujudkan program pemerintah dan melayani masyarakat dengan baik.', explanation: 'Jawaban ini mencerminkan motivasi dan pemahaman yang paling benar tentang peran dan fungsi ASN sebagai pelayan publik dan abdi negara. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Ketika tim saya tidak kompak, saya akan...', options: ['Menyalahkan pemimpin tim.', 'Bekerja sendiri-sendiri.', 'Mencoba menginisiasi kegiatan atau diskusi untuk membangun kembali kebersamaan dan komunikasi.', 'Pindah ke tim lain.', 'Membiarkannya saja, nanti juga akan baik sendiri.'], answer: 'Mencoba menginisiasi kegiatan atau diskusi untuk membangun kembali kebersamaan dan komunikasi.', explanation: 'Ini menunjukkan inisiatif, kemampuan jejaring kerja, dan peran aktif dalam menciptakan lingkungan kerja yang positif. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Cara saya menjaga semangat kerja saat merasa jenuh adalah...', options: ['Sering izin tidak masuk kerja.', 'Bekerja lebih lambat dari biasanya.', 'Mengingat kembali tujuan dan motivasi saya bekerja, serta mencari tantangan baru.', 'Mengeluh terus-menerus.', 'Menunggu dimarahi atasan baru semangat lagi.'], answer: 'Mengingat kembali tujuan dan motivasi saya bekerja, serta mencari tantangan baru.', explanation: 'Ini menunjukkan kemampuan mengelola diri dan motivasi yang berasal dari dalam (intrinsik). Anda proaktif mencari cara untuk kembali bersemangat. Skor 5.' },
    { subtest: 'Tes Karakteristik Pribadi (TKP)', question: 'Bagaimana Anda memandang perubahan dalam pekerjaan?', options: ['Sebagai ancaman yang dapat mengganggu zona nyaman.', 'Sebagai sesuatu yang harus dihindari jika memungkinkan.', 'Sebagai peluang untuk belajar hal baru dan meningkatkan kinerja.', 'Sebagai beban tambahan yang merepotkan.', 'Sebagai hal yang biasa saja dan tidak perlu reaksi berlebihan.'], answer: 'Sebagai peluang untuk belajar hal baru dan meningkatkan kinerja.', explanation: 'Memandang perubahan sebagai peluang menunjukkan kemampuan beradaptasi yang positif, pola pikir yang berkembang (growth mindset), dan orientasi pada perbaikan. Skor tertinggi (5).' },
    ],

    // --- Data dinamis ini tidak perlu diubah ---
    judulHalaman: document.title,
    url: window.location.href
};

// ===================================================================================
// --- FUNGSI PENGIRIMAN DATA KE GOOGLE SHEET (DIPERBARUI) ---
// ===================================================================================
async function kirimKeGoogleSheet(data) {
    const statusEl = document.getElementById('submission-status');
    statusEl.textContent = 'Mengirim hasil ujian...';
    
    const formData = new FormData();
    // Menambahkan semua data ke dalam objek FormData.
    formData.append('kategori', data.kategori);
    formData.append('url', data.url);
    formData.append('judulHalaman', data.judulHalaman);
    formData.append('Nama', data.Nama);
    formData.append('JumlahSoal', data.JumlahSoal);
    formData.append('JawabanBenar', data.JawabanBenar);
    formData.append('JawabanSalah', data.JawabanSalah);
    formData.append('TidakDijawab', data.TidakDijawab);
    formData.append('Durasi', data.Durasi);
    formData.append('Nilai', data.Nilai);
    formData.append('StatusKelulusan', data.StatusKelulusan);

    try {
        const response = await fetch(EXAM_CONFIG.scriptURL, {
            method: 'POST',
            body: formData
        });
        
        // Membaca respons sebagai JSON untuk mendapatkan pesan sukses/error dari server
        const result = await response.json();
        
        if (result.result === "success") {
            statusEl.innerHTML = `Hasil ujian berhasil disimpan. <b><a href="${EXAM_CONFIG.linkPeringkat}">Cek Peringkat kamu di sini</a></b>`;
            statusEl.style.color = 'green';
        } else {
            // Menampilkan pesan error yang lebih spesifik dari server
            throw new Error(result.message || 'Terjadi kesalahan dari server.');
        }
    } catch (error) {
        console.error('Error saat mengirim ke Google Sheet:', error);
        statusEl.textContent = `Gagal menyimpan hasil. Coba lagi nanti. Error: ${error.message}`;
        statusEl.style.color = 'red';
    }
}

// ===================================================================================
// --- LOGIKA UTAMA UJIAN (DISESUAIKAN, TIDAK PERLU DIUBAH LAGI) ---
// ===================================================================================
document.addEventListener('DOMContentLoaded', () => {
    // Menggunakan bank soal dari EXAM_CONFIG
    const questions = EXAM_CONFIG.bankSoal;
    let currentQuestionIndex = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let questionStatus = new Array(questions.length).fill('unanswered');
    let timerInterval;
    let startTime;
    let currentUsername = '';

    const loginContainer = document.getElementById('login-container');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');
    const loginBtn = document.getElementById('login-btn');
    const loginError = document.getElementById('login-error');
    const appHeader = document.querySelector('.header');
    const quizContainer = document.querySelector('.quiz-container');
    const resultPage = document.getElementById('result-page');
    const subtestTitleEl = document.getElementById('subtest-title');
    const questionNumberEl = document.getElementById('question-number');
    const questionTextEl = document.getElementById('question-text');
    const optionsEl = document.getElementById('options');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const doubtfulBtn = document.getElementById('doubtful-btn');
    const finishBtn = document.getElementById('finish-btn');
    const timerEl = document.getElementById('timer');
    const restartBtn = document.getElementById('restart-btn');
    const logoutBtn = document.getElementById('logout-btn');
    const headerInfo = document.getElementById('header-info');
    const confirmationModal = document.getElementById('confirmation-modal');
    const confirmYesBtn = document.getElementById('confirm-yes');
    const confirmNoBtn = document.getElementById('confirm-no');
    
    function showLoginPage() {
        loginContainer.style.display = 'block'; // Diubah dari 'flex' agar sesuai skrip asli
        appHeader.style.display = 'none';
        quizContainer.style.display = 'none';
        resultPage.style.display = 'none';
        passwordInput.value = '';
        loginError.style.display = 'none';
    }

    function handleLogin() {
        const password = passwordInput.value;
        const username = usernameInput.value.trim();
        if (username === "") {
            loginError.textContent = "Username tidak boleh kosong.";
            loginError.style.display = 'block';
            return;
        }
        // Menggunakan password dari EXAM_CONFIG
        if (password === EXAM_CONFIG.password) {
            currentUsername = username;
            loginContainer.style.display = 'none';
            appHeader.style.display = 'flex';
            quizContainer.style.display = 'flex';
            resultPage.style.display = 'none';
            headerInfo.textContent = `Peserta: ${currentUsername}`;
            startQuiz();
        } else {
            loginError.textContent = "Password salah. Coba lagi.";
            loginError.style.display = 'block';
        }
    }
    
    function handleLogout() {
        clearInterval(timerInterval);
        showLoginPage();
    }

    function startQuiz() {
        currentQuestionIndex = 0;
        userAnswers.fill(null);
        questionStatus.fill('unanswered');
        quizContainer.style.display = 'flex';
        resultPage.style.display = 'none';
        setupQuestionGrids();
        displayQuestion(currentQuestionIndex);
        // Menggunakan durasi dari EXAM_CONFIG
        startTimer(EXAM_CONFIG.durasiMenit * 60);
        startTime = new Date();
    }

    function setupQuestionGrids() {
        const gridContainer = document.getElementById('grid-container');
        gridContainer.innerHTML = '';
        const subtests = [...new Set(questions.map(q => q.subtest))];
        subtests.forEach(subtest => {
            const group = document.createElement('div');
            group.className = 'subtest-group';
            const title = document.createElement('h3');
            title.textContent = subtest;
            const grid = document.createElement('div');
            grid.className = 'question-grid';
            group.appendChild(title);
            group.appendChild(grid);
            gridContainer.appendChild(group);
            questions.forEach((q, index) => {
                if (q.subtest === subtest) {
                    const button = document.createElement('button');
                    button.className = 'grid-button';
                    button.textContent = index + 1;
                    button.onclick = () => jumpToQuestion(index);
                    grid.appendChild(button);
                }
            });
        });
    }

    function displayQuestion(index) {
        document.querySelector('.grid-button.current')?.classList.remove('current');
        currentQuestionIndex = index;
        const question = questions[index];
        subtestTitleEl.textContent = question.subtest;
        questionNumberEl.textContent = index + 1;
        questionTextEl.innerHTML = question.question;
        optionsEl.innerHTML = '';
        question.options.forEach(option => {
            const li = document.createElement('li');
            const label = document.createElement('label');
            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = `option-${index}`;
            radio.value = option;
            if (userAnswers[index] === option) {
                radio.checked = true;
                label.classList.add('selected');
            }
            radio.onchange = () => selectAnswer(index, option, label);
            const span = document.createElement('span');
            span.innerHTML = option; // Menggunakan innerHTML untuk render jika ada format
            label.appendChild(radio);
            label.appendChild(span);
            li.appendChild(label);
            optionsEl.appendChild(li);
        });
        updateNavButtons();
        updateGridButtonStatus(index, true);
    }

    function selectAnswer(index, answer, label) {
        userAnswers[index] = answer;
        document.querySelectorAll(`#options li label`).forEach(l => l.classList.remove('selected'));
        label.classList.add('selected');
        if (questionStatus[index] !== 'doubtful') {
            questionStatus[index] = 'answered';
        }
        updateGridButtonStatus(index);
    }
    
    function updateNavButtons() {
        prevBtn.disabled = currentQuestionIndex === 0;
        nextBtn.disabled = currentQuestionIndex === questions.length - 1;
    }
    
    function updateGridButtonStatus(index, isCurrent = false) {
        const allGridButtons = document.querySelectorAll('.grid-button');
        if (isCurrent) {
            const currentBtn = document.querySelector('.grid-button.current');
            if (currentBtn) currentBtn.classList.remove('current');
        }
        const button = Array.from(allGridButtons).find(btn => parseInt(btn.textContent) === index + 1);
        if (!button) return;
        if(isCurrent) button.classList.add('current');
        button.classList.remove('answered', 'doubtful');
        switch (questionStatus[index]) {
            case 'answered': button.classList.add('answered'); break;
            case 'doubtful': button.classList.add('doubtful'); break;
        }
    }

    function jumpToQuestion(index) {
        displayQuestion(index);
    }

    function startTimer(duration) {
        let timer = duration;
        clearInterval(timerInterval);
        timerEl.parentElement.classList.remove('low-time');
        timerInterval = setInterval(() => {
            let minutes = parseInt(timer / 60, 10);
            let seconds = parseInt(timer % 60, 10);
            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;
            timerEl.textContent = `${minutes}:${seconds}`;
            if (timer < 300 && !timerEl.parentElement.classList.contains('low-time')) { 
                timerEl.parentElement.classList.add('low-time'); 
            }
            if (--timer < 0) {
                clearInterval(timerInterval);
                finishQuiz();
            }
        }, 1000);
    }
    
    function showConfirmation() {
        confirmationModal.style.display = 'flex';
    }

    function formatDuration(ms) {
    const totalSeconds = Math.floor(ms / 1000);
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    return `${minutes} menit ${seconds.toString().padStart(2, '0')} detik`;
}


    function finishQuiz() {
        clearInterval(timerInterval);
        confirmationModal.style.display = 'none';
        const endTime = new Date();
        const durationMs = endTime - startTime;
        let correctCount = 0;
        questions.forEach((q, index) => {
            if (userAnswers[index] === q.answer) correctCount++;
        });
        const totalQuestions = questions.length;
        const answeredCount = userAnswers.filter(a => a !== null).length;
        const incorrectCount = answeredCount - correctCount;
        const unansweredCount = totalQuestions - answeredCount;
        const finalScore = totalQuestions > 0 ? parseFloat(((correctCount / totalQuestions) * 100).toFixed(2)) : 0;
        const isPassed = finalScore >= EXAM_CONFIG.passingGrade;
        
        quizContainer.style.display = 'none';
        resultPage.style.display = 'block';
        headerInfo.textContent = `Hasil Ujian: ${currentUsername}`;
        
        const statusEl = document.getElementById('status-lulus');
        statusEl.textContent = isPassed ? 'SELAMAT, ANDA LULUS!' : 'MAAF, ANDA BELUM LULUS';
        statusEl.className = `status ${isPassed ? 'lulus' : 'gagal'}`;
        document.getElementById('final-score').textContent = finalScore;
        document.getElementById('score-details').textContent = `${correctCount} dari ${totalQuestions} soal benar`;
        
        const reviewSection = document.getElementById('review-section');
        reviewSection.innerHTML = '';
        questions.forEach((q, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === q.answer;
            reviewSection.innerHTML += `
                <div class="review-item">
                    <p><strong>Soal ${index + 1}:</strong> ${q.question}</p>
                    <div class="review-answer user-answer ${isCorrect ? '' : 'is-incorrect'}">Jawaban Anda: ${userAnswer || 'Tidak Dijawab'}</div>
                    ${!isCorrect ? `<div class="review-answer correct-answer">Jawaban Benar: ${q.answer}</div>` : ''}
                    <div class="explanation"><strong>Pembahasan:</strong> ${q.explanation}</div>
                </div>
            `;
        });
        
        const dataForSheet = {
            kategori: EXAM_CONFIG.kategori,
            url: EXAM_CONFIG.url,
            judulHalaman: EXAM_CONFIG.judulHalaman,
            Nama: currentUsername,
            JumlahSoal: totalQuestions,
            JawabanBenar: correctCount,
            JawabanSalah: incorrectCount,
            TidakDijawab: unansweredCount,
            Durasi: formatDuration(durationMs),
            Nilai: finalScore,
            StatusKelulusan: isPassed ? 'Lulus' : 'Tidak Lulus'
        };
        kirimKeGoogleSheet(dataForSheet);
    }

    // Event Listeners
    loginBtn.addEventListener('click', handleLogin);
    passwordInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleLogin(); });
    logoutBtn.addEventListener('click', handleLogout);
    prevBtn.addEventListener('click', () => { if (currentQuestionIndex > 0) displayQuestion(currentQuestionIndex - 1) });
    nextBtn.addEventListener('click', () => { if (currentQuestionIndex < questions.length - 1) displayQuestion(currentQuestionIndex + 1) });
    doubtfulBtn.addEventListener('click', () => {
        const currentStatus = questionStatus[currentQuestionIndex];
        if (currentStatus === 'doubtful') {
            questionStatus[currentQuestionIndex] = userAnswers[currentQuestionIndex] ? 'answered' : 'unanswered';
        } else {
            questionStatus[currentQuestionIndex] = 'doubtful';
        }
        updateGridButtonStatus(currentQuestionIndex);
    });
    finishBtn.addEventListener('click', showConfirmation);
    confirmYesBtn.addEventListener('click', finishQuiz);
    confirmNoBtn.addEventListener('click', () => confirmationModal.style.display = 'none');
    restartBtn.addEventListener('click', handleLogout);

    showLoginPage();
});
</script>
